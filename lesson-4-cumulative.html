<!DOCTYPE html>
<html lang="zh-CN" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google" content="notranslate">
    <title>Lesson 4 Cumulative: Americans Study Chinese - Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5/dist/hanzi-writer.min.js"></script>
    <link rel="stylesheet" href="css/common.css">
    <script src="js/utils.js"></script>
    <script src="js/command-palette.js"></script>
    <script src="js/etymology-loader.js"></script>
    <script src="js/quiz-engine.js"></script>
</head>
<body class="bg-gray-100 min-h-screen p-4 md:p-8">
    <a href="home.html" class="fixed top-4 left-4 bg-white hover:bg-gray-100 text-gray-700 px-3 py-2 rounded-lg shadow border border-gray-200 transition text-sm">‚Üê Home</a>

    <div class="max-w-3xl mx-auto bg-white rounded-xl shadow-lg p-6 md:p-8 mt-16 md:mt-0">
        <h1 class="text-3xl font-bold text-center mb-6 text-gray-800">Lesson 4 Cumulative: ÁæéÂõΩ‰∫∫Â≠¶‰∏≠Êñá (Americans Study Chinese)</h1>

        <!-- Mode Selector -->
        <div class="flex flex-wrap gap-2 justify-center mb-6">
            <button class="mode-btn px-4 py-2 rounded-lg border-2 border-gray-300 hover:bg-gray-100 transition active:bg-blue-500 active:text-white active:border-blue-500" data-mode="char-to-pinyin">Char ‚Üí Pinyin</button>
            <button class="mode-btn px-4 py-2 rounded-lg border-2 border-gray-300 hover:bg-gray-100 transition" data-mode="char-to-pinyin-mc">Char ‚Üí Pinyin (MC)</button>
            <button class="mode-btn px-4 py-2 rounded-lg border-2 border-gray-300 hover:bg-gray-100 transition" data-mode="char-to-tones">Char ‚Üí Tones</button>
            <button class="mode-btn px-4 py-2 rounded-lg border-2 border-gray-300 hover:bg-gray-100 transition" data-mode="audio-to-pinyin">Audio ‚Üí Pinyin</button>
            <button class="mode-btn px-4 py-2 rounded-lg border-2 border-gray-300 hover:bg-gray-100 transition" data-mode="pinyin-to-char">Pinyin ‚Üí Char</button>
            <button class="mode-btn px-4 py-2 rounded-lg border-2 border-gray-300 hover:bg-gray-100 transition" data-mode="char-to-meaning-type">Char ‚Üí Meaning</button>
            <button class="mode-btn px-4 py-2 rounded-lg border-2 border-gray-300 hover:bg-gray-100 transition" data-mode="audio-to-meaning">Audio ‚Üí Meaning</button>
            <button class="mode-btn px-4 py-2 rounded-lg border-2 border-gray-300 hover:bg-gray-100 transition" data-mode="meaning-to-char">Meaning ‚Üí Char</button>
            <button class="mode-btn px-4 py-2 rounded-lg border-2 border-gray-300 hover:bg-gray-100 transition" data-mode="stroke-order">Stroke Order</button>
            <button class="mode-btn px-4 py-2 rounded-lg border-2 border-gray-300 hover:bg-gray-100 transition" data-mode="handwriting">Handwriting</button>
            <button class="mode-btn px-4 py-2 rounded-lg border-2 border-gray-300 hover:bg-gray-100 transition" data-mode="draw-char">Draw Character</button>
            <button class="mode-btn px-4 py-2 rounded-lg border-2 border-gray-300 hover:bg-gray-100 transition" data-mode="radical-practice">Radical Practice</button>
            <button class="mode-btn px-4 py-2 rounded-lg border-2 border-gray-300 hover:bg-gray-100 transition" data-mode="study">Study Mode</button>
        </div>

        <!-- Upcoming Preview -->
        <div id="upcomingCharacters" class="hidden text-center mb-4">
            <div class="text-xs uppercase tracking-widest text-gray-400">Upcoming</div>
            <div class="preview-list flex justify-center gap-4 mt-2 text-4xl text-gray-300"></div>
        </div>

        <!-- Question Display -->
        <div id="questionDisplay" class="text-center"></div>

        <!-- Hint -->
        <div id="hint" class="text-center text-2xl font-semibold my-4"></div>

        <!-- Audio Section -->
        <div id="audioSection" class="text-center my-4 hidden">
            <button id="playAudioBtn" class="bg-cyan-500 hover:bg-cyan-600 text-white px-6 py-3 rounded-lg transition">üîä Play Sound</button>
        </div>

        <!-- Type Mode -->
        <div id="typeMode" class="space-y-4">
            <input type="text" id="answerInput" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-lg" placeholder="Type your answer...">
            <button id="checkBtn" class="w-full bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold transition">Check Answer</button>
        </div>

        <!-- Choice Mode -->
        <div id="choiceMode" class="hidden">
            <div id="options" class="grid grid-cols-2 gap-3"></div>
        </div>

        <!-- Fuzzy Mode -->
        <div id="fuzzyMode" class="hidden space-y-4">
            <input type="text" id="fuzzyInput" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-lg" placeholder="Type your answer...">
            <div id="fuzzyOptions" class="grid grid-cols-2 gap-3"></div>
        </div>

        <!-- Stroke Order Mode -->
        <div id="strokeOrderMode" class="hidden">
            <div id="strokeOrderWrapper" class="flex flex-col items-center gap-4">
                <div id="strokeOrderCharacter" class="text-6xl"></div>
                <div class="flex items-center gap-4">
                    <button id="strokeStartBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-5 py-2 rounded-lg transition">Start Animation</button>
                    <button id="strokeLoopBtn" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-5 py-2 rounded-lg transition">Loop</button>
                    <button id="strokeSlowBtn" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-5 py-2 rounded-lg transition">Slow</button>
                </div>
            </div>
        </div>

        <!-- Handwriting Mode -->
        <div id="handwritingMode" class="hidden">
            <div id="handwritingCharacter" class="text-6xl text-center"></div>
            <div class="mt-6 flex flex-col items-center gap-4">
                <div id="handwritingCanvasContainer" class="bg-gray-100 border border-gray-300 rounded-lg">
                    <canvas id="handwritingCanvas" width="300" height="300" class="bg-white rounded-lg"></canvas>
                </div>
                <div class="flex flex-wrap gap-3 justify-center">
                    <button id="handwritingCheckBtn" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg transition">Check Stroke Order</button>
                    <button id="handwritingHintBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg transition">Show Hint</button>
                    <button id="handwritingResetBtn" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-3 rounded-lg transition">Reset</button>
                </div>
            </div>
        </div>

        <!-- Draw Character Mode -->
        <div id="drawCharMode" class="hidden">
            <div id="drawCharCanvasContainer" class="bg-gray-100 border border-gray-300 rounded-lg mx-auto" style="max-width: 360px;">
                <canvas id="drawCharCanvas" width="320" height="320" class="bg-white rounded-lg"></canvas>
            </div>
            <div class="flex flex-wrap gap-3 justify-center mt-4">
                <button id="drawCheckBtn" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg transition">Check Drawing</button>
                <button id="drawClearBtn" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-3 rounded-lg transition">Clear</button>
                <button id="drawShowBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg transition">Show Character</button>
            </div>
            <div id="drawFeedback" class="text-center text-xl font-semibold my-4 min-h-[24px]"></div>
            <div id="ocrResult" class="text-center text-gray-600"></div>
        </div>

        <!-- Study Mode -->
        <div id="studyMode" class="hidden">
            <div class="text-center text-gray-600 mb-4">Study all vocabulary with audio</div>
            <div id="studyList" class="space-y-2 max-h-[600px] overflow-y-auto"></div>
        </div>

        <!-- Radical Practice Mode -->
        <div id="radicalPracticeMode" class="hidden">
            <div class="text-center text-gray-600 mb-4">Select all radicals in the character</div>
            <div id="radicalOptions" class="grid grid-cols-2 md:grid-cols-3 gap-3"></div>
            <div class="mt-4 text-center">
                <button id="radicalSubmitBtn" class="bg-green-500 hover:bg-green-600 text-white px-8 py-3 rounded-lg transition text-lg">Submit Answer</button>
            </div>
        </div>

        <!-- Feedback -->
        <div id="feedback" class="text-center text-2xl font-semibold my-4 min-h-[24px]"></div>

        <!-- Stats -->
        <div id="stats" class="flex justify-between text-sm text-gray-600 pt-4 border-t border-gray-200">
            <span>Score: <span id="score" class="font-semibold">0</span>/<span id="total" class="font-semibold">0</span></span>
            <span>Accuracy: <span id="accuracy" class="font-semibold">0%</span></span>
        </div>
    </div>
    <script>
        const characters = [
            // Pages 44-48 vocabulary
            { char: 'Â•≥', pinyin: 'n«ö', meaning: 'daughter; female', radicals: ['Â•≥ (woman)'] },
            { char: 'Â¶à', pinyin: 'mƒÅ', meaning: 'mom; mother', radicals: ['Â•≥ (woman)', 'È©¨ (horse)'] },
            { char: '‰ªäÂ§©', pinyin: 'jƒ´ntiƒÅn', meaning: 'today', radicals: ['‰∫∫ (person)', 'Â§© (sky)'] },
            { char: 'Ê≥®ÂÜå', pinyin: 'zh√πc√®', meaning: 'register (at school)', radicals: ['Ê∞µ (water)', '‰∏ª (master)', 'ÂÜÇ (border)', 'Â±Æ (sprout)'] },
            { char: 'ÈÄâ', pinyin: 'xu«én', meaning: 'choose', radicals: ['Ëæ∂ (walk)', 'ÂÖà (first)'] },
            { char: '‰∫Ü', pinyin: '.le', meaning: 'completed-action particle', radicals: ['‰∫Ö (hook)'] },
            { char: 'Èó®', pinyin: 'm√©n', meaning: 'measure word for courses', radicals: ['Èó® (door)'] },
            { char: 'ËØæ', pinyin: 'k√®', meaning: 'course; class', radicals: ['ËÆ† (speech)', 'Êûú (fruit)'] },
            { char: 'ÊØç', pinyin: 'm«î', meaning: 'mother (abbr.)', radicals: ['ÊØç (mother)'] },
            { char: 'ËÆ®Âéå', pinyin: 't«éoy√†n', meaning: 'find disgusting; dislike', radicals: ['ËÆ† (speech)', 'ÂØ∏ (inch)', 'ÂéÇ (cliff)', 'Áä¨ (dog)'] },

            // Page 45 vocabulary
            { char: 'VËµ∑‚Ä¶Êù•', pinyin: 'V.q«ê.lai', meaning: 'start to V; set about V-ing' },
            { char: 'Âπ∂', pinyin: 'b√¨ng', meaning: 'actually (not); used for emphasis', radicals: ['‰∏∑ (eight)', 'Âπ≤ (dry)'] },
            { char: 'Âè™ÊòØ', pinyin: 'zh«ê.sh√¨', meaning: 'only; just', radicals: ['Âè£ (mouth)', 'Êó• (sun)', 'Ê≠¢ (stop)'] },
            { char: 'ÂñúÊ¨¢', pinyin: 'x«êhuƒÅn', meaning: 'like', radicals: ['Â£´ (scholar)', 'Âè£ (mouth)', 'Âèà (again)', 'Ê¨† (lack)'] },
            { char: 'ÈÄº', pinyin: 'bƒ´', meaning: 'force; compel', radicals: ['Ëæ∂ (walk)', 'ÁïÄ (offer)'] },
            { char: 'Âæó', pinyin: '.de', meaning: 'predicative complement marker', radicals: ['ÂΩ≥ (step)', 'Êó¶ (dawn)', 'ÂØ∏ (inch)'] },
            { char: 'Â§™', pinyin: 't√†i', meaning: 'too; excessively', radicals: ['Â§ß (big)', '‰∏∂ (dot)'] },
            { char: 'Á¥ß', pinyin: 'j«ên', meaning: 'tight; strict', radicals: ['Á∫ü (silk)', 'ËÅø (brush)'] },
            { char: 'ÊÉ≥', pinyin: 'xi«éng', meaning: 'want; would like to; think', radicals: ['Êú® (wood)', 'ÁõÆ (eye)', 'ÂøÉ (heart)'] },
            { char: 'Â•ΩÊûÅ‰∫Ü', pinyin: 'h«éoj√≠.le', meaning: 'wonderful; great', radicals: ['Â•≥ (woman)', 'Â≠ê (child)', 'Êú® (wood)', 'Âèä (reach)', '‰∫Ö (hook)'] },
            { char: 'Áà∏Áà∏', pinyin: 'b√†.ba', meaning: 'father', radicals: ['Áà∂ (father)', 'Â∑¥ (curved)'] },
            { char: 'Âê¨Âà∞', pinyin: 'tƒ´ng.d√†o', meaning: 'hear', radicals: ['Âè£ (mouth)', 'Êñ§ (axe)', 'Ëá≥ (arrive)', 'ÂàÇ (knife)'] },
            { char: 'Ê∂àÊÅØ', pinyin: 'xiƒÅo.xi', meaning: 'news; information', radicals: ['Ê∞µ (water)', 'ËÇñ (resemble)', 'Ëá™ (self)', 'ÂøÉ (heart)'] },
            { char: '‰∏ÄÂÆö', pinyin: 'y√≠d√¨ng', meaning: 'certainly; for sure', radicals: ['‰∏Ä (one)', 'ÂÆÄ (roof)', 'Áñã (bolt of cloth)'] },
            { char: 'È´òÂÖ¥', pinyin: 'gƒÅox√¨ng', meaning: 'happy; glad', radicals: ['È´ò (tall)', 'ÂÖ´ (eight)', 'Â∞è (small)'] },
            { char: 'ÂëäËØâ', pinyin: 'g√†o.s√π', meaning: 'tell; inform', radicals: ['Áâõ (cow)', 'Âè£ (mouth)', 'ËÆ† (speech)', 'Êñ• (scold)'] },

            // Page 46 vocabulary
            { char: '‰Ω†ÂèàÊù•‰∫Ü', pinyin: 'n«ê y√≤u l√°i.le', meaning: 'there you go again', radicals: ['‰∫ª (person)', 'Â∞î (you)', 'Âèà (again)', 'Êú® (wood)', '‰∫Ö (hook)'] },
            { char: 'Ë¶Å', pinyin: 'y√†o', meaning: 'need; want', radicals: ['Ë¶Ä (west)', 'Â•≥ (woman)'] },
            { char: '‰∏ñÁïå', pinyin: 'sh√¨ji√®', meaning: 'world', radicals: ['‰∏Ä (one)', 'Âªæ (two hands)', 'Áî∞ (field)', '‰ªã (mediate)'] },
            { char: 'ÂêÑ', pinyin: 'g√®', meaning: 'each; every', radicals: ['Âè£ (mouth)', 'Â§Ç (go)'] },
            { char: 'Âú∞', pinyin: 'd√¨', meaning: 'place; land', radicals: ['Âúü (earth)', '‰πü (also)'] },
            { char: '‰∏ç‰ΩÜ', pinyin: 'b√πd√†n', meaning: 'not only', radicals: ['‰∏ç (not)', '‰∫ª (person)', 'Êó¶ (dawn)'] },
            { char: 'Ëã±ÂõΩ', pinyin: 'Yƒ´ng.gu√≥', meaning: 'England', radicals: ['Ëâπ (grass)', 'Â§Æ (center)', 'Âõó (enclosure)', 'Áéâ (jade)'] },
            { char: 'Ê≥ïÂõΩ', pinyin: 'F«é.gu√≥', meaning: 'France', radicals: ['Ê∞µ (water)', 'Âéª (go)', 'Âõó (enclosure)', 'Áéâ (jade)'] },

            // Page 47 vocabulary
            { char: 'Âì¶', pinyin: '√≥', meaning: 'oh?! (interjection)', radicals: ['Âè£ (mouth)', 'Êàë (I)'] },
            { char: 'ÊòØÂêó', pinyin: 'sh√¨.ma', meaning: 'is that so?', radicals: ['Êó• (sun)', 'Ê≠¢ (stop)', 'Âè£ (mouth)', 'È©¨ (horse)'] },
            { char: '‰∫∫Âè£', pinyin: 'r√©n.k«íu', meaning: 'population', radicals: ['‰∫∫ (person)', 'Âè£ (mouth)'] },
            { char: 'Â§ö', pinyin: 'du≈ç', meaning: 'many; much', radicals: ['Â§ï (evening)'] },
            { char: 'ÁªèÊµé', pinyin: 'jƒ´ng.j√¨', meaning: 'economy', radicals: ['Á∫ü (silk)', 'Â∑† (warp)', 'Ê∞µ (water)', 'ÈΩê (uniform)'] },
            { char: 'Ë¥∏Êòì', pinyin: 'm√†o.y√¨', meaning: 'trade; commerce', radicals: ['ÂÜÇ (border)', 'ÂçØ (zodiac)', 'Êó• (sun)', 'Âãø (not)'] },
            { char: 'ÂèëËææ', pinyin: 'fƒÅ.d√°', meaning: 'developed; advanced', radicals: ['‰∏ø (slash)', 'Âºì (bow)', 'Ëæ∂ (walk)', 'Â§ß (big)'] },
            { char: 'ÂÅö', pinyin: 'zu√≤', meaning: 'do; make', radicals: ['‰∫ª (person)', 'ÊïÖ (cause)'] },
            { char: 'ÁîüÊÑè', pinyin: 'shƒìngyi', meaning: 'business', radicals: ['Áîü (life)', 'Èü≥ (sound)', 'ÂøÉ (heart)'] },
            { char: 'Ë∂äÊù•Ë∂ä', pinyin: 'yu√® l√°i yu√®', meaning: 'more and more', radicals: ['Ëµ∞ (walk)', 'Êàâ (axe)', 'Êú® (wood)'] },
            { char: '‰∏ÄÂ§©ÊØî‰∏ÄÂ§©', pinyin: 'y√¨tiƒÅn b«ê y√¨tiƒÅn', meaning: 'day by day; more with each day', radicals: ['‰∏Ä (one)', 'Â§© (sky)', 'ÊØî (compare)'] },
            { char: '‰∏∫‰∫Ü', pinyin: 'w√®ile', meaning: 'in order to', radicals: ['‰∏∂ (dot)', '‰∫∫ (person)', '‰∫Ö (hook)'] },
            { char: '‰π∞Âçñ', pinyin: 'm«éi.m√†i', meaning: 'business transaction; buying and selling', radicals: ['ÁΩí (net)', '‰πõ (bend)', 'ÂçÅ (ten)', '‰π∞ (buy)'] },
            { char: 'Êâç', pinyin: 'c√°i', meaning: 'only; just now', radicals: ['‰∏Ä (one)', '‰∏ø (slash)', '‰∫Ö (hook)'] },
            { char: 'Âï∞', pinyin: 'lo', meaning: 'particle showing obviousness', radicals: ['Âè£ (mouth)', 'ÁΩó (net)'] },
            { char: '‰∏çËßÅÂæó', pinyin: 'b√∫ji√†n.de', meaning: 'not necessarily', radicals: ['‰∏ç (not)', 'ËßÅ (see)', 'ÂΩ≥ (step)', 'Êó¶ (dawn)', 'ÂØ∏ (inch)'] },
            { char: 'ÊñáÂ≠¶', pinyin: 'w√©n.xu√©', meaning: 'literature', radicals: ['Êñá (writing)', 'ÂÜñ (cover)', 'Â≠ê (child)'] },

            // Page 48 vocabulary
            { char: 'Ëá™Â∑±', pinyin: 'z√¨j«ê', meaning: 'self', radicals: ['Ëá™ (self)', 'Â∑± (self)'] },
            { char: 'Êõ¥', pinyin: 'g√®ng', meaning: 'even more', radicals: ['‰∏Ä (one)', 'Êó• (sun)', 'Êî¥ (tap)'] },
            { char: 'ÊúâÊÑèÊÄù', pinyin: 'y«íu.y√¨.si', meaning: 'interesting; meaningful', radicals: ['Êúà (moon)', 'Âèà (again)', 'Èü≥ (sound)', 'ÂøÉ (heart)', 'Áî∞ (field)'] },
            { char: 'Âë¢', pinyin: '.ne', meaning: 'particle for emphasis or continuation', radicals: ['Âè£ (mouth)', 'Â∞º (nun)'] }
        ];

        // Initialize the quiz with the modular engine
        initQuiz(characters, {
            enablePreviewQueue: true,
            previewQueueSize: 4,
            previewElementId: 'upcomingCharacters',
            previewApplicableModes: ['char-to-meaning-type', 'char-to-meaning', 'audio-to-meaning']
        });
    </script>
</body>
</html>
