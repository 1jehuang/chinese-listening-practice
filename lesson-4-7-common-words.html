<!DOCTYPE html>
<html lang="zh-CN" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google" content="notranslate">
    <title>Lessons 4-7 Common Words ‚Äì Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5/dist/hanzi-writer.min.js"></script>
    <link rel="stylesheet" href="css/common.css">
    <style>
        html, body {
            height: 100%;
            overflow: hidden;
        }

        /* Confidence pane on the right for this experimental page */
        body.experimental-layout #confidencePanel {
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            width: 240px;
            overflow: hidden;
            background: linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);
            border-left: 1px solid #e5e7eb;
            box-shadow: -6px 0 20px rgba(0,0,0,0.05);
            padding: 0.65rem 0.85rem 0.85rem;
            margin-top: 0 !important;
            z-index: 40;
            font-size: 0.8rem;
            display: flex;
            flex-direction: column;
            gap: 0.35rem;
        }

        body.experimental-layout #confidencePanel .space-y-1 { margin-top: 0.35rem; }
        body.experimental-layout #confidencePanel .border-t { border-top: none !important; }
        body.experimental-layout #confidencePanel .pt-4 { padding-top: 0 !important; }
        body.experimental-layout #confidencePanel #confidenceList {
            flex: 1;
            overflow-y: auto;
            min-height: 0;
            padding-bottom: 0.5rem;
            max-height: none !important;
        }

        /* Add breathing room so content doesn't sit under the right pane */
        body.experimental-layout .app-container {
            padding-right: 16rem;
            min-height: 100vh;
        }

        /* Hide confidence panel on smaller screens */
        @media (max-width: 1024px) {
            body.experimental-layout #confidencePanel {
                display: none;
            }
            body.experimental-layout .app-container {
                padding-right: 0;
            }
        }

        /* Main layout */
        .app-container {
            display: flex;
            height: 100vh;
            width: 100vw;
        }

        /* Sidebar (match standard pages) */
        .sidebar {
            width: 16rem;
            flex-shrink: 0;
            background: #ffffff;
            box-shadow: 0 10px 25px rgba(0,0,0,0.06);
            padding: 1rem;
            overflow-y: auto;
        }

        .sidebar-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .sidebar-home-btn {
            padding: 0.375rem 0.75rem;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            color: #374151;
            text-decoration: none;
            transition: background 0.15s;
        }

        .sidebar-home-btn:hover {
            background: #f3f4f6;
        }

        .sidebar h2 {
            font-size: 1.125rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 1rem;
            margin-top: 0.5rem;
            text-transform: none;
            letter-spacing: 0;
        }

        .sidebar .mode-desc {
            font-size: 0.875rem;
            color: #9ca3af;
            margin-bottom: 0.75rem;
            line-height: 1.4;
        }

        .sidebar .mode-btn {
            display: block;
            width: 100%;
            padding: 0.5rem 0.75rem;
            margin-bottom: 0.25rem;
            border-radius: 0.75rem;
            border: 2px solid #d1d5db;
            background: #ffffff;
            text-align: left;
            font-size: 0.9rem;
            color: #374151;
            cursor: pointer;
            transition: background 0.15s, border-color 0.15s, color 0.15s;
        }

        .sidebar .mode-btn:hover {
            background: #f3f4f6;
        }

        .sidebar .mode-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        /* Main content area */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-width: 0;
            padding: 1rem 2rem;
            overflow: hidden;
        }

        /* Header with title and toolbar */
        .quiz-header {
            flex-shrink: 0;
            text-align: center;
            padding-bottom: 0.5rem;
        }

        .quiz-header h1 {
            font-size: 1.125rem;
            font-weight: 600;
            color: #374151;
            margin: 0;
        }

        /* Quiz display area - grows to fill space */
        .quiz-display {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 0;
            padding: 1rem 0;
        }

        #questionDisplay {
            width: 100%;
        }

        /* Three-column layout tweaks */
        .three-column-meaning-layout {
            margin: 0 auto;
            padding: 0.5rem;
            gap: 2rem;
        }

        .three-column-meaning-layout .column-char-large {
            font-size: clamp(56px, 12vw, 120px);
        }

        .three-column-meaning-layout .column-char {
            font-size: clamp(28px, 5vw, 40px);
        }

        .three-column-meaning-layout .column-card {
            min-height: auto;
            padding: 0.5rem;
        }

        /* Input section - fixed at bottom */
        .input-section {
            flex-shrink: 0;
            max-width: 32rem;
            width: 100%;
            margin: 0 auto;
            padding-top: 1rem;
        }

        .input-section input[type="text"] {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.15s;
        }

        .input-section input[type="text"]:focus {
            border-color: #3b82f6;
        }

        .choice-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
        }

        .choice-grid button {
            padding: 0.875rem 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            background: white;
            font-size: 0.9375rem;
            cursor: pointer;
            transition: all 0.15s;
        }

        .choice-grid button:hover {
            border-color: #3b82f6;
            background: #eff6ff;
        }

        /* Stats bar */
        .stats-bar {
            flex-shrink: 0;
            display: flex;
            justify-content: center;
            gap: 2rem;
            padding: 0.75rem 0;
            font-size: 0.875rem;
            color: #6b7280;
            border-top: 1px solid #f3f4f6;
            margin-top: auto;
        }

        .stats-bar span {
            font-weight: 500;
        }

        /* Feedback area */
        #feedback {
            min-height: 2rem;
            text-align: center;
            font-size: 1.25rem;
            font-weight: 600;
            padding: 0.5rem 0;
        }

        /* Hide sections by default */
        #typeMode, #choiceMode, #fuzzyMode, #strokeOrderMode,
        #handwritingMode, #drawCharMode, #studyMode {
            display: none;
        }

        #typeMode.active, #choiceMode.active, #fuzzyMode.active,
        #strokeOrderMode.active, #handwritingMode.active,
        #drawCharMode.active, #studyMode.active {
            display: block;
        }

        /* Study mode needs full width - remove input-section constraint */
        body.study-mode-active .input-section {
            max-width: none;
            flex-direction: column;
        }

        #studyMode.active {
            width: 100%;
        }

        /* Hide feedback in study mode */
        body.study-mode-active #feedback {
            display: none;
        }


        /* Audio button */
        #audioSection button {
            padding: 0.75rem 1.5rem;
            background: #06b6d4;
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.15s;
        }

        #audioSection button:hover {
            background: #0891b2;
        }
    </style>
    <script src="js/utils.js"></script>
    <script src="js/command-palette.js"></script>
    <script src="js/etymology-loader.js"></script>
    <script src="js/pinyin-utils.js"></script>
    <script src="js/engine/ai-service.js"></script>
    <script src="js/engine/chat.js"></script>
    <script src="js/quiz-engine.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase-sync.js"></script>
    <script src="js/eeg-bridge.js"></script>
    <script src="js/eeg-neuro.js"></script>
</head>
<body class="experimental-layout">
    <div class="app-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="home.html" class="sidebar-home-btn">‚Üê Home</a>
                <div id="sidebar-profile-slot"></div>
            </div>
            <h2>Quiz Modes</h2>
            <p class="mode-desc">Every word from Lessons 4‚Äì7 dialogues and vocab.</p>
            <nav>
                <button class="mode-btn" data-mode="char-to-meaning-type">Char ‚Üí Meaning</button>
                <button class="mode-btn" data-mode="char-to-pinyin">Char ‚Üí Pinyin</button>
                <button class="mode-btn" data-mode="char-to-pinyin-type">Char ‚Üí Pinyin (MC)</button>
                <button class="mode-btn" data-mode="char-to-pinyin-tones-mc">Char ‚Üí Pinyin ‚Üí Tones (MC)</button>
                <button class="mode-btn" data-mode="char-to-tones">Char ‚Üí Tones</button>
                <button class="mode-btn" data-mode="audio-to-pinyin">Audio ‚Üí Pinyin</button>
                <button class="mode-btn" data-mode="pinyin-to-char">Pinyin ‚Üí Char</button>
                <button class="mode-btn" data-mode="audio-to-meaning">Audio ‚Üí Meaning</button>
                <button class="mode-btn" data-mode="meaning-to-char">Meaning ‚Üí Char</button>
                <button class="mode-btn" data-mode="stroke-order">Stroke Order</button>
                <button class="mode-btn" data-mode="handwriting">Handwriting</button>
                <button class="mode-btn" data-mode="draw-char">Draw Character</button>
                <button class="mode-btn" data-mode="study">Study Mode</button>
            </nav>
        </aside>

        <main class="main-content">
            <header class="quiz-header">
                <h1>Lessons 4‚Äì7 ¬∑ Common Words (Dialogue + Vocab)</h1>
                <p class="text-gray-500 text-sm">Merged list from Lessons 4, 5, 6, and 7 with duplicates removed.</p>
            </header>

            <section class="quiz-display">
                <div id="questionDisplay"></div>
                <div id="upcomingCharacters" class="hidden" style="margin-top: 1rem;">
                    <div class="preview-list" style="display: flex; justify-content: center; gap: 1rem; font-size: 2rem; color: #d1d5db;"></div>
                    <div style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.1em; color: #9ca3af; margin-top: 0.5rem;">Upcoming</div>
                </div>
                <div id="hint" style="font-size: 1.25rem; font-weight: 600; margin: 0.75rem 0;"></div>
                <div id="audioSection" class="hidden" style="margin: 1rem 0;">
                    <button id="playAudioBtn">üîä Play Sound</button>
                </div>
            </section>

            <section class="input-section">
                <div id="typeMode">
                    <input type="text" id="answerInput" placeholder="Type your answer...">
                    <button id="checkBtn" style="display: none;">Check Answer</button>
                </div>
                <div id="choiceMode">
                    <div id="options" class="choice-grid"></div>
                </div>
                <div id="fuzzyMode">
                    <input type="text" id="fuzzyInput" placeholder="Type your answer...">
                    <div id="fuzzyOptions" class="choice-grid" style="margin-top: 0.75rem;"></div>
                </div>
                <div id="strokeOrderMode">
                    <div id="strokeOrderWriter" style="display: flex; justify-content: center;"></div>
                </div>
                <div id="handwritingMode">
                    <p style="text-align: center; color: #6b7280; margin-bottom: 1rem;">Practice writing on paper, then reveal the answer.</p>
                    <div id="handwritingWriter" style="display: flex; justify-content: center; gap: 10px;"></div>
                    <div style="display: flex; justify-content: center; gap: 0.75rem; margin-top: 1rem;">
                        <button id="hwShowBtn" style="padding: 0.75rem 2rem; background: #3b82f6; color: white; border: none; border-radius: 0.5rem; cursor: pointer;">Show Answer</button>
                        <button id="hwNextBtn" style="padding: 0.75rem 2rem; background: #22c55e; color: white; border: none; border-radius: 0.5rem; cursor: pointer;">Next</button>
                    </div>
                    <p id="hwSpaceHint" class="text-center text-sm text-gray-500 mt-2">Space: show ‚Üí tap ‚úì correct ¬∑ hold ‚úó wrong</p>
                </div>
                <div id="drawCharMode">
                    <div style="text-align: center; margin-bottom: 1rem;">
                        <div id="ocrResult" style="font-size: 3.5rem; min-height: 5rem; color: #3b82f6; font-weight: 700;"></div>
                        <div style="font-size: 0.875rem; color: #9ca3af;">Real-time recognition</div>
                    </div>
                    <canvas id="drawCanvas" style="display: block; margin: 0 auto; border: 2px solid #d1d5db; border-radius: 0.5rem; cursor: crosshair;" width="300" height="300"></canvas>
                    <div style="display: flex; justify-content: center; gap: 0.75rem; margin-top: 1rem;">
                        <button id="clearCanvasBtn" style="padding: 0.5rem 1.5rem; background: #ef4444; color: white; border: none; border-radius: 0.5rem; cursor: pointer;">Clear</button>
                        <button id="submitDrawBtn" style="padding: 0.5rem 1.5rem; background: #22c55e; color: white; border: none; border-radius: 0.5rem; cursor: pointer;">Submit</button>
                        <button id="fullscreenDrawBtn" style="padding: 0.5rem 1.5rem; background: #3b82f6; color: white; border: none; border-radius: 0.5rem; cursor: pointer;">Fullscreen</button>
                    </div>
                </div>
                <div id="studyMode" class="hidden">
                    <div style="text-align: center; color: #6b7280; margin-bottom: 1rem;">Full list of all common words from Lessons 4‚Äì7.</div>
                    <div id="studyList" style="max-height: 480px; overflow-y: auto;"></div>
                </div>
                <div id="feedback" class="text-center text-2xl font-semibold my-4 min-h-[24px]"></div>
            </section>

            <footer class="stats-bar" id="stats">
                <span>Score: <span id="score">0</span>/<span id="total">0</span></span>
                <span>Accuracy: <span id="accuracy">0%</span></span>
            </footer>
        </main>
    </div>

    <script>
        // Lessons 4‚Äì7 data (dialogue + vocab)
        const lesson4 = [
            { char: 'Â•≥', pinyin: 'n«ö', meaning: 'daughter; female' },
            { char: 'Â¶à', pinyin: 'mƒÅ', meaning: 'mom; mother' },
            { char: '‰ªäÂ§©', pinyin: 'jƒ´ntiƒÅn', meaning: 'today' },
            { char: 'Ê≥®ÂÜå', pinyin: 'zh√πc√®', meaning: 'register (at school)' },
            { char: 'ÈÄâ', pinyin: 'xu«én', meaning: 'choose' },
            { char: 'Èó®', pinyin: 'm√©n', meaning: 'measure word for courses' },
            { char: 'ÊØç', pinyin: 'm«î', meaning: 'mother (abbr.)' },
            { char: 'ËÆ®Âéå', pinyin: 't«éoy√†n', meaning: 'find disgusting; dislike' },
            { char: 'VËµ∑‚Ä¶Êù•', pinyin: 'V.q«ê.lai', meaning: 'start to V; set about V-ing' },
            { char: 'Âπ∂', pinyin: 'b√¨ng', meaning: 'actually (not); used for emphasis' },
            { char: 'Âè™ÊòØ', pinyin: 'zh«ê.sh√¨', meaning: 'only; just' },
            { char: 'ÂñúÊ¨¢', pinyin: 'x«êhuƒÅn', meaning: 'like' },
            { char: 'ÈÄº', pinyin: 'bƒ´', meaning: 'force; compel' },
            { char: 'Âæó', pinyin: '.de', meaning: 'predicative complement marker' },
            { char: 'Â§™', pinyin: 't√†i', meaning: 'too; excessively' },
            { char: 'Á¥ß', pinyin: 'j«ên', meaning: 'tight; strict' },
            { char: 'Ê≤°(Êúâ)', pinyin: 'm√©i(.y«íu)', meaning: 'have not; there is not' },
            { char: 'Â•ΩÊûÅ‰∫Ü', pinyin: 'h«éoj√≠.le', meaning: 'wonderful; great' },
            { char: 'Áà∏Áà∏', pinyin: 'b√†.ba', meaning: 'father' },
            { char: 'Âê¨Âà∞', pinyin: 'tƒ´ng.d√†o', meaning: 'hear' },
            { char: 'Ê∂àÊÅØ', pinyin: 'xiƒÅo.xi', meaning: 'news; information' },
            { char: '‰∏ÄÂÆö', pinyin: 'y√≠d√¨ng', meaning: 'certainly; for sure' },
            { char: 'È´òÂÖ¥', pinyin: 'gƒÅox√¨ng', meaning: 'happy; glad' },
            { char: 'ÂëäËØâ', pinyin: 'g√†o.s√π', meaning: 'tell; inform' },
            { char: '‰Ω†ÂèàÊù•‰∫Ü', pinyin: 'n«ê y√≤u l√°i.le', meaning: 'there you go again' },
            { char: 'Ë¶Å', pinyin: 'y√†o', meaning: 'need; want' },
            { char: '‰∏ñÁïå', pinyin: 'sh√¨ji√®', meaning: 'world' },
            { char: 'ÂêÑ', pinyin: 'g√®', meaning: 'each; every' },
            { char: 'Âú∞', pinyin: 'd√¨', meaning: 'place; land' },
            { char: '‰∏ç‰ΩÜ', pinyin: 'b√πd√†n', meaning: 'not only' },
            { char: 'Ëã±ÂõΩ', pinyin: 'Yƒ´ng.gu√≥', meaning: 'England' },
            { char: 'Ê≥ïÂõΩ', pinyin: 'F«é.gu√≥', meaning: 'France' },
            { char: 'ÊòØÂêó', pinyin: 'sh√¨.ma', meaning: 'is that so?' },
            { char: '‰∫∫Âè£', pinyin: 'r√©n.k«íu', meaning: 'population' },
            { char: 'Â§ö', pinyin: 'du≈ç', meaning: 'many; much' },
            { char: 'ÁªèÊµé', pinyin: 'jƒ´ng.j√¨', meaning: 'economy' },
            { char: 'Ë¥∏Êòì', pinyin: 'm√†o.y√¨', meaning: 'trade; commerce' },
            { char: 'ÂèëËææ', pinyin: 'fƒÅ.d√°', meaning: 'developed; advanced' },
            { char: 'ÂÅö', pinyin: 'zu√≤', meaning: 'do; make' },
            { char: 'ÁîüÊÑè', pinyin: 'shƒìngyi', meaning: 'business' },
            { char: 'Ë∂ä‚Ä¶Ë∂ä‚Ä¶', pinyin: 'yu√®...yu√®...', meaning: 'the more... the more...' },
            { char: '‰∏∫‰∫Ü', pinyin: 'w√®i.le', meaning: 'in order to' },
            { char: 'Âéª', pinyin: 'q√π', meaning: 'go' },
            { char: 'ÂÅö‰π∞Âçñ', pinyin: 'zu√≤ m«éi.mai', meaning: 'do business' },
            { char: 'ÂÄí', pinyin: 'd√†o', meaning: 'actually; on the contrary' },
            { char: '‰∏çËßÅÂæó', pinyin: 'b√∫ji√†n.de', meaning: 'not necessarily' },
            { char: 'ÊñáÂ≠¶', pinyin: 'w√©nxu√©', meaning: 'literature' }
        ];

        const lesson5 = [
            { char: 'ÊàëÊòØÂõõÂ∑ù‰∫∫Ôºü', pinyin: 'w«í sh√¨ s√¨chuƒÅn r√©n', meaning: 'Am I from Sichuan?' },
            { char: 'ÂØπ', pinyin: 'du√¨', meaning: 'correct' },
            { char: 'Â∞±', pinyin: 'ji√π', meaning: 'exactly; precisely' },
            { char: 'ÂèØËÉΩ', pinyin: 'kƒõn√©ng', meaning: 'maybe; possible' },
            { char: '‰ª•‰∏∫', pinyin: 'y«êw√©i', meaning: 'mistakenly think' },
            { char: 'ÂëäËØâ', pinyin: 'g√†o.s√π', meaning: 'tell' },
            { char: 'ÈªÑÁßç‰∫∫', pinyin: 'hu√°ngzh«íng.r√©n', meaning: 'Asian American' },
            { char: 'Êó•Êú¨‰∫∫', pinyin: 'R√¨.bƒõn.r√©n', meaning: 'Japanese people' },
            { char: 'ÁúãÊù•', pinyin: 'k√†n.lai', meaning: 'it seems' },
            { char: 'Êù•Ëá™', pinyin: 'l√°i.z√¨', meaning: 'come from' },
            { char: 'ÁöÆËÇ§', pinyin: 'p√≠f≈´', meaning: 'skin' },
            { char: 'ÁôΩ', pinyin: 'b√°i', meaning: 'white' },
            { char: 'Èªë', pinyin: 'hƒìi', meaning: 'black' },
            { char: 'Â§¥Âèë', pinyin: 't√≥u.f√†', meaning: 'hair' },
            { char: 'ÈïøÂæó', pinyin: 'zh«éng.de', meaning: 'look; grow (to appear)' },
            { char: 'ÂÉè', pinyin: 'xi√†ng', meaning: 'resemble' },
            { char: '‰∏çÂÉè', pinyin: 'b√∫ xi√†ng', meaning: 'doesn‚Äôt resemble' },
            { char: 'Âèà', pinyin: 'y√≤u', meaning: 'again; both‚Ä¶and' },
            { char: '‰ª•‰∏∫', pinyin: 'y«êw√©i', meaning: 'assume (incorrectly)' },
            { char: '‰∫≤Êàö', pinyin: 'qƒ´n.qi', meaning: 'relatives' },
            { char: 'Âê¨ËØ¥', pinyin: 'tƒ´ngshu≈ç', meaning: 'hear (that)' },
            { char: 'ÁÉ≠ÊÉÖ', pinyin: 'r√®q√≠ng', meaning: 'warm; enthusiastic' },
            { char: 'ÊûÅ‰∫Ü', pinyin: 'j√≠.le', meaning: 'extremely' },
            { char: 'ÊúâÂêç', pinyin: 'y«íum√≠ng', meaning: 'famous' },
            { char: 'È§êÈ¶Ü', pinyin: 'cƒÅngu«én', meaning: 'restaurant' },
            { char: '‰∏ç‰∏ÄÂÆö', pinyin: 'b√π y√≠d√¨ng', meaning: 'not necessarily' },
            { char: '‰πüËÆ∏', pinyin: 'yƒõx«î', meaning: 'perhaps; maybe' },
            { char: 'ËØ¥‰∏çÂÆö', pinyin: 'shu≈ç.bu.d√¨ng', meaning: 'maybe; perhaps' },
            { char: 'ÁúãËµ∑Êù•', pinyin: 'k√†n.qi.lai', meaning: 'seem; appear' },
            { char: 'ÂõõÂ∑ùËèú', pinyin: 'S√¨chuƒÅn c√†i', meaning: 'Sichuan food' },
            { char: 'Ëøû', pinyin: 'li√°n', meaning: 'even' },
            { char: 'Â∑û', pinyin: 'zh≈çu', meaning: 'state (US)' },
            { char: 'Â¶ÇÊûú', pinyin: 'r√∫gu«í', meaning: 'if' },
            { char: 'ÂÖ≥Á≥ª', pinyin: 'guƒÅnxi', meaning: 'connection; relation' },
            { char: 'ÊñáÂåñ', pinyin: 'w√©nhu√†', meaning: 'culture' },
            { char: 'ËÆ§‰∏∫', pinyin: 'r√®nw√©i', meaning: 'think; consider' },
            { char: 'ÁæéÂõΩ‰∫∫', pinyin: 'Mƒõigu√≥r√©n', meaning: 'American' }
        ];

        const lesson6 = [
            { char: 'Âà´', pinyin: 'bi√©', meaning: 'don\'t' },
            { char: 'ÊãÖÂøÉ', pinyin: 'dƒÅnxƒ´n', meaning: 'worry' },
            { char: 'ÈìÉ', pinyin: 'l√≠ng', meaning: 'bell' },
            { char: 'Â£∞(Èü≥)', pinyin: 'shƒìng(yƒ´n)', meaning: 'sound' },
            { char: 'ÂΩïÈü≥', pinyin: 'l√πyƒ´n', meaning: '(telephone) recording; record (sound)' },
            { char: 'Â±ãÂ≠ê', pinyin: 'w≈´.zi', meaning: 'room' },
            { char: 'Ê≤°Ê≥ï', pinyin: 'm√©i.f«é', meaning: 'no way; can\'t' },
            { char: 'Êé•ÁîµËØù', pinyin: 'jiƒì di√†nhu√†', meaning: 'answer phone calls' },
            { char: 'ËØ∑', pinyin: 'q«êng', meaning: 'please; request' },
            { char: 'Áïô‰∏ã', pinyin: 'li√∫xi√†', meaning: 'leave (message, etc.); stay (behind)' },
            { char: 'Âè∑Á†Å', pinyin: 'h√†om«é', meaning: 'number' },
            { char: 'ÂõûÊù•', pinyin: 'hu√≠l√°i', meaning: 'come back; return' },
            { char: 'ÂõûÁîµËØù', pinyin: 'hu√≠ di√†nhu√†', meaning: 'call back' },
            { char: 'Êï¥Â§©', pinyin: 'zhƒõngtiƒÅn', meaning: 'all day long; always' },
            { char: 'Âøô', pinyin: 'm√°ng', meaning: 'busy' },
            { char: '‰∫õ', pinyin: 'xiƒì', meaning: '"plural" measure word' },
            { char: '‰∏ãÊ¨°', pinyin: 'xi√†c√¨', meaning: 'next time' },
            { char: 'Ê¨°', pinyin: 'c√¨', meaning: 'AN for time; instance' },
            { char: 'Â•π', pinyin: 'tƒÅ', meaning: 'she; her' },
            { char: 'Áî∑ÊúãÂèã', pinyin: 'n√°np√©ng.you', meaning: 'boyfriend' },
            { char: 'Âá†', pinyin: 'j«ê', meaning: 'several; a few' },
            { char: '‰ø°', pinyin: 'x√¨n', meaning: 'believe' },
            { char: '‰∏äÊ¨°', pinyin: 'sh√†ngc√¨', meaning: 'last time' },
            { char: 'ÂõûÂÆ∂', pinyin: 'hu√≠jiƒÅ', meaning: 'go home; return home' },
            { char: '‰Ωè', pinyin: 'zh√π', meaning: 'stay; live' },
            { char: 'Â§©', pinyin: 'tiƒÅn', meaning: 'day' },
            { char: 'Áî∑ÁöÑ', pinyin: 'n√°n.de', meaning: 'male; man' },
            { char: 'Â•ΩÂá†', pinyin: 'h«éoj«ê', meaning: 'quite a few' },
            { char: 'Âè™', pinyin: 'zh«ê', meaning: 'only; just' },
            { char: '‰∫ã', pinyin: 'sh√¨', meaning: 'things; matters; business' },
            { char: '‰ΩïÂøÖ', pinyin: 'h√©b√¨', meaning: 'why must? why bother?' },
            { char: '‰∏∫‚Ä¶ÊìçÂøÉ', pinyin: 'w√©i...cƒÅoxƒ´n', meaning: 'worry for' },
            { char: 'Âà´ÁöÑ', pinyin: 'bi√©.de', meaning: 'other (things)' },
            { char: 'ÊÄÄÂ≠ï', pinyin: 'hu√°iy√πn', meaning: 'be pregnant' },
            { char: 'Âøµ‰π¶', pinyin: 'ni√†nsh≈´', meaning: 'study' },
            { char: 'ÊîæÂøÉ', pinyin: 'f√†ngxƒ´n', meaning: 'don\'t worry; put down the heart' },
            { char: 'ÈÅøÂ≠ï', pinyin: 'b√¨y√πn', meaning: 'avoid pregnancy; practice birth control' },
            { char: 'ÈöæÈÅì', pinyin: 'n√°nd√†o', meaning: 'do you mean to say that...?' },
            { char: 'Ë¶ÅÊòØ', pinyin: 'y√†oshi', meaning: 'if' },
            { char: 'Â´Å', pinyin: 'ji√†', meaning: 'marry (a man)' },
            { char: 'Â§ñÂõΩ‰∫∫', pinyin: 'w√†igu√≥r√©n', meaning: 'foreigner' },
            { char: 'ÊÄé‰πàÂäû', pinyin: 'zƒõn.me b√†n', meaning: 'what to do? what can be done?' },
            { char: 'Ë∞Å', pinyin: 'sh√©i', meaning: 'who' },
            { char: 'ÂÆπÊòì', pinyin: 'r√≥ngy√¨', meaning: 'easy' },
            { char: 'ÂèØ', pinyin: 'kƒõ', meaning: 'indeed; (for emphasis)' },
            { char: 'ÂÜ≥ÂÆö', pinyin: 'ju√©d√¨ng', meaning: 'decide' },
            { char: 'Â∏¶', pinyin: 'd√†i', meaning: 'bring; take' },
            { char: '‰∏ÄÊ†∑', pinyin: 'y√≠y√†ng', meaning: 'the same; identical' },
            { char: 'Áî®ÂÖ∑', pinyin: 'y√≤ngj√π', meaning: 'utensil; appliance' },
            { char: 'ÂæÆÊ≥¢ÁÇâ', pinyin: 'wƒìib≈çl√∫', meaning: 'microwave oven' },
            { char: 'Ë°å', pinyin: 'x√≠ng', meaning: 'all right; OK; no problem' },
            { char: 'Â•Ω‰πÖ', pinyin: 'h«éoji«î', meaning: 'for a long time' },
            { char: 'Áî®', pinyin: 'y√≤ng', meaning: 'use' },
            { char: 'Âùè‰∫Ü', pinyin: 'hu√†i.le', meaning: 'be broken' },
            { char: 'ÂÆ∂ÂÖ∑', pinyin: 'jiƒÅj√π', meaning: 'furniture' },
            { char: 'Â∫ä', pinyin: 'chu√°ng', meaning: 'bed' },
            { char: 'Ê°åÂ≠ê', pinyin: 'zhu≈ç.zi', meaning: 'table' },
            { char: '‰π¶Êû∂', pinyin: 'sh≈´ji√†', meaning: 'bookshelf' },
            { char: 'Êää', pinyin: 'b«é', meaning: 'AN for things with a handle' },
            { char: 'Ê§ÖÂ≠ê', pinyin: 'y«ê.zi', meaning: 'chair' },
            { char: 'Âè∞ÁÅØ', pinyin: 't√°idƒìng', meaning: 'desk lamp' },
            { char: 'Âú∞ÊØØ', pinyin: 'd√¨t«én', meaning: 'rug; carpet' },
            { char: 'Ë¶ÅÁ¥ß', pinyin: 'y√†oj«ên', meaning: 'important; serious' },
            { char: 'ÂØπ‰∫Ü', pinyin: 'du√¨.le', meaning: 'by the way' },
            { char: 'Âêà‰Ωè', pinyin: 'h√©zh√π', meaning: 'share living space' },
            { char: 'ËÆ§ËØÜ', pinyin: 'r√®n.shi', meaning: 'know (a person); recognize' },
            { char: 'Âπ¥Á∫ß', pinyin: 'ni√°nj√≠', meaning: 'school grade; year' },
            { char: '‰∏ÄËµ∑', pinyin: 'y√¨q«ê', meaning: 'together' },
            { char: '‰∏çÂ§™', pinyin: 'b√πt√†i', meaning: 'not very' },
            { char: 'Êµ¥ÂÆ§', pinyin: 'y√πsh√¨', meaning: 'bathroom' },
            { char: 'ÂéïÊâÄ', pinyin: 'c√®su«í', meaning: 'toilet' },
            { char: 'ÂêàÁî®', pinyin: 'h√©y√≤ng', meaning: 'share (use together)' },
            { char: 'ÊúÄÂ•Ω', pinyin: 'zu√¨h«éo', meaning: 'had better' },
            { char: 'ËÄÉËôë', pinyin: 'k«éol«ú', meaning: 'consider' },
            { char: '‰∏ÄÂ±ÇÊ•º', pinyin: 'y√¨ c√©ng l√≥u', meaning: 'one floor; the same floor' },
            { char: 'ËÄÉËØï', pinyin: 'k«éosh√¨', meaning: 'examination; test' }
        ];

        const lesson7part1 = [
            { char: 'Âêå‰Ωè', pinyin: 't√≥ngzh√π', meaning: 'live together' },
            { char: '‰ªé‚Ä¶Ëµ∑', pinyin: 'c√≥ng...q«ê', meaning: 'starting from' },
            { char: 'Â≠¶Êúü', pinyin: 'xu√©qƒ´', meaning: 'semester' },
            { char: 'ÂÖ¨ÂØì', pinyin: 'g≈çngy√π', meaning: 'apartment' },
            { char: 'ÂÆøËàç', pinyin: 's√πsh√®', meaning: 'dormitory' },
            { char: 'Êñπ‰æø', pinyin: 'fƒÅngbi√†n', meaning: 'convenient' },
            { char: 'Êê¨Âá∫Âéª', pinyin: 'bƒÅn ch≈´.q√π', meaning: 'move out' },
            { char: 'ÂêÉÈ•≠', pinyin: 'chƒ´f√†n', meaning: 'eat' },
            { char: 'ÈóÆÈ¢ò', pinyin: 'w√®nt√≠', meaning: 'problem; question' },
            { char: 'Âé®Êàø', pinyin: 'ch√∫f√°ng', meaning: 'kitchen' },
            { char: 'È£üÂ†Ç', pinyin: 'sh√≠t√°ng', meaning: 'cafeteria; canteen' },
            { char: 'Ë¥µ', pinyin: 'gu√¨', meaning: 'expensive' },
            { char: 'Â•ΩÂêÉ', pinyin: 'h«éochƒ´', meaning: 'tasty; delicious' },
            { char: 'ÊØèÂ§©', pinyin: 'mƒõitiƒÅn', meaning: 'every day' },
            { char: 'Âèó‰∏ç‰∫Ü', pinyin: 'sh√≤u.bu.li«éo', meaning: "can't stand; intolerable" },
            { char: 'ÊåëÂâî', pinyin: 'tiƒÅo.ti', meaning: 'nitpicky; fastidious' },
            { char: 'ÂäüËØæ', pinyin: 'g≈çngk√®', meaning: 'schoolwork; homework' },
            { char: 'Êó∂Èó¥', pinyin: 'sh√≠jiƒÅn', meaning: 'time' },
            { char: '‰π∞', pinyin: 'm«éi', meaning: 'buy' },
            { char: 'ËΩÆÊµÅ', pinyin: 'l√∫nli√∫', meaning: 'take turns' },
            { char: 'ÊôöÈ•≠', pinyin: 'w«énf√†n', meaning: 'dinner' },
            { char: 'Êó©È•≠', pinyin: 'z«éof√†n', meaning: 'breakfast' },
            { char: '‰∏≠È•≠', pinyin: 'zh≈çngf√†n', meaning: 'lunch' },
            { char: '‰∏âÊòéÊ≤ª', pinyin: 'sƒÅnm√≠ngzh√¨', meaning: 'sandwich' },
            { char: 'ÁÆÄÂçï', pinyin: 'ji«éndƒÅn', meaning: 'simple' }
        ];

        const lesson7part2 = [
            { char: 'ÂÆπÊòì', pinyin: 'r√≥ngy√¨', meaning: 'easy' },
            { char: 'ÂèØ', pinyin: 'kƒõ', meaning: 'indeed; (for emphasis)' },
            { char: 'ÂÜ≥ÂÆö', pinyin: 'ju√©d√¨ng', meaning: 'decide' },
            { char: 'Â∏¶', pinyin: 'd√†i', meaning: 'bring; take' },
            { char: 'Áî®ÂÖ∑', pinyin: 'y√≤ngj√π', meaning: 'utensil; appliance' },
            { char: 'ÂæÆÊ≥¢ÁÇâ', pinyin: 'wƒìib≈çl√∫', meaning: 'microwave oven' },
            { char: 'Ë°å', pinyin: 'x√≠ng', meaning: 'all right; OK; no problem' },
            { char: 'Â•Ω‰πÖ', pinyin: 'h«éoji«î', meaning: 'for a long time' },
            { char: 'Áî®', pinyin: 'y√≤ng', meaning: 'use' },
            { char: 'Âùè‰∫Ü', pinyin: 'hu√†i.le', meaning: 'be broken' },
            { char: 'ÂÆ∂ÂÖ∑', pinyin: 'jiƒÅj√π', meaning: 'furniture' },
            { char: 'Â∫ä', pinyin: 'chu√°ng', meaning: 'bed' },
            { char: 'Ê°åÂ≠ê', pinyin: 'zhu≈ç.zi', meaning: 'table' },
            { char: '‰π¶Êû∂', pinyin: 'sh≈´ji√†', meaning: 'bookshelf' },
            { char: 'Êää', pinyin: 'b«é', meaning: 'AN for things with a handle' },
            { char: 'Ê§ÖÂ≠ê', pinyin: 'y«ê.zi', meaning: 'chair' },
            { char: 'Âè∞ÁÅØ', pinyin: 't√°idƒìng', meaning: 'desk lamp' },
            { char: 'Âú∞ÊØØ', pinyin: 'd√¨t«én', meaning: 'rug; carpet' },
            { char: 'Ë¶ÅÁ¥ß', pinyin: 'y√†oj«ên', meaning: 'important; serious' },
            { char: 'Âêà‰Ωè', pinyin: 'h√©zh√π', meaning: 'share living space' },
            { char: 'ËÆ§ËØÜ', pinyin: 'r√®n.shi', meaning: 'know (a person); recognize' },
            { char: 'Âπ¥Á∫ß', pinyin: 'ni√°nj√≠', meaning: 'school grade; year' },
            { char: '‰∏ÄËµ∑', pinyin: 'y√¨q«ê', meaning: 'together' },
            { char: '‰∏çÂ§™', pinyin: 'b√πt√†i', meaning: 'not very' },
            { char: 'Êµ¥ÂÆ§', pinyin: 'y√πsh√¨', meaning: 'bathroom' },
            { char: 'ÂéïÊâÄ', pinyin: 'c√®su«í', meaning: 'toilet' },
            { char: 'ÂêàÁî®', pinyin: 'h√©y√≤ng', meaning: 'share (use together)' },
            { char: 'ÊúÄÂ•Ω', pinyin: 'zu√¨h«éo', meaning: 'had better' },
            { char: 'ËÄÉËôë', pinyin: 'k«éol«ú', meaning: 'consider' },
            { char: '‰∏ÄÂ±ÇÊ•º', pinyin: 'y√¨ c√©ng l√≥u', meaning: 'one floor; the same floor' },
            { char: 'ËÄÉËØï', pinyin: 'k«éosh√¨', meaning: 'examination; test' }
        ];

        const combinedMap = new Map();
        [...lesson4, ...lesson5, ...lesson6, ...lesson7part1, ...lesson7part2].forEach(item => {
            if (!combinedMap.has(item.char)) combinedMap.set(item.char, item);
        });
        const characters = Array.from(combinedMap.values());

        initQuiz(characters, {
            enablePreviewQueue: true,
            previewQueueSize: 1,
            previewElementId: 'upcomingCharacters',
            previewApplicableModes: ['char-to-meaning-type', 'char-to-meaning', 'audio-to-meaning']
        });
    </script>
</body>
</html>
