<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dialogue Practice - Jeremy's Lines</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="js/command-palette.js"></script>
</head>
<body class="bg-gray-50 min-h-screen" onload="initCommandPalette()">
    <div class="max-w-4xl mx-auto p-6">
        <!-- Header -->
        <div class="mb-6">
            <a href="home.html" class="text-blue-600 hover:text-blue-800 text-sm">â† Back to Home</a>
            <h1 class="text-3xl font-bold mt-2 mb-2">Dialogue Practice - Jeremy's Lines</h1>
            <p class="text-gray-600">Practice your lines from the summer vacation dialogue (æš‘å‡è®¡åˆ’)</p>
        </div>

        <!-- Progress and Controls -->
        <div class="bg-white rounded-lg shadow p-4 mb-6">
            <div class="flex items-center justify-between mb-4">
                <div class="text-lg font-semibold">
                    Line <span id="currentLineNum">1</span> of <span id="totalLines">6</span>
                </div>
                <div class="text-sm text-gray-600">
                    Press <kbd class="px-2 py-1 bg-gray-200 rounded text-xs font-mono">Space</kbd> for audio
                </div>
            </div>

            <div class="flex flex-wrap gap-2">
                <button onclick="revealChinese()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">
                    Reveal Chinese
                </button>
                <button onclick="revealPinyin()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">
                    Reveal Pinyin
                </button>
                <button onclick="playAudio()" class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded">
                    ğŸ”Š Play Audio
                </button>
                <button onclick="nextLine()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">
                    Next â†’
                </button>
                <button onclick="prevLine()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded">
                    â† Previous
                </button>
                <button onclick="shuffle()" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded">
                    ğŸ”€ Shuffle
                </button>
            </div>
        </div>

        <!-- Practice Card -->
        <div id="practiceCard" class="bg-white rounded-lg shadow-lg p-8">
            <!-- Content loaded by JS -->
        </div>

        <!-- Keyboard Shortcuts -->
        <div class="mt-6 bg-blue-50 border-l-4 border-blue-500 p-4 rounded">
            <h3 class="font-semibold mb-2">âŒ¨ï¸ Keyboard Shortcuts:</h3>
            <div class="grid grid-cols-2 gap-2 text-sm text-gray-700">
                <div><kbd class="px-2 py-1 bg-white rounded border">â†’</kbd> Next line</div>
                <div><kbd class="px-2 py-1 bg-white rounded border">â†</kbd> Previous line</div>
                <div><kbd class="px-2 py-1 bg-white rounded border">C</kbd> Reveal Chinese</div>
                <div><kbd class="px-2 py-1 bg-white rounded border">P</kbd> Reveal Pinyin</div>
                <div><kbd class="px-2 py-1 bg-white rounded border">Space</kbd> Play audio</div>
                <div><kbd class="px-2 py-1 bg-white rounded border">S</kbd> Shuffle</div>
            </div>
        </div>

        <!-- Full Dialogue Script -->
        <div class="mt-8 bg-white rounded-lg shadow p-6">
            <h2 class="text-2xl font-bold mb-4">ğŸ“œ Full Dialogue Script</h2>
            <p class="text-sm text-gray-600 mb-4">Click any line to hear it spoken ğŸ”Š</p>
            <div class="space-y-4 text-sm">
                <div class="p-3 bg-gray-50 rounded cursor-pointer hover:bg-gray-100 transition" onclick="playScriptLine('ä¹ä¹ï¼Œä½ ä»Šå¹´æš‘å‡æœ‰ä»€ä¹ˆè®¡åˆ’å‘¢ï¼Ÿ')">
                    <div class="font-semibold text-gray-700">F (Fiona):</div>
                    <div class="mt-1">ä¹ä¹ï¼Œä½ ä»Šå¹´æš‘å‡æœ‰ä»€ä¹ˆè®¡åˆ’å‘¢ï¼Ÿ</div>
                    <div class="text-gray-600 italic">lÃ¨lÃ¨, nÇ jÄ«nniÃ¡n shÇ”jiÃ  yÇ’u shÃ©nme jÃ¬huÃ  ne?</div>
                    <div class="text-gray-500 text-xs mt-1">Lele, what are your plans for this summer vacation?</div>
                </div>

                <div class="p-3 bg-gray-50 rounded cursor-pointer hover:bg-gray-100 transition" onclick="playScriptLine('è¿™ä¸ªæš‘å‡æˆ‘æƒ³å»è¥¿ç­ç‰™ã€‚ä½ å‘¢ï¼Ÿ')">
                    <div class="font-semibold text-gray-700">S (Sophia/ä¹ä¹):</div>
                    <div class="mt-1">è¿™ä¸ªæš‘å‡æˆ‘æƒ³å»è¥¿ç­ç‰™ã€‚ä½ å‘¢ï¼Ÿ</div>
                    <div class="text-gray-600 italic">zhÃ¨ge shÇ”jiÃ  wÇ’ xiÇng qÃ¹ xÄ«bÄnyÃ¡. nÇ ne?</div>
                    <div class="text-gray-500 text-xs mt-1">This summer break, I want to go to Spain. What about you?</div>
                </div>

                <div class="p-3 bg-gray-50 rounded cursor-pointer hover:bg-gray-100 transition" onclick="playScriptLine('æˆ‘æƒ³å»æ—¥æœ¬ã€‚')">
                    <div class="font-semibold text-gray-700">F:</div>
                    <div class="mt-1">æˆ‘æƒ³å»æ—¥æœ¬ã€‚</div>
                    <div class="text-gray-600 italic">wÇ’ xiÇng qÃ¹ rÃ¬bÄ›n.</div>
                    <div class="text-gray-500 text-xs mt-1">I want to go to Japan.</div>
                </div>

                <div class="p-3 bg-green-50 rounded border-l-4 border-green-500 cursor-pointer hover:bg-green-100 transition" onclick="playScriptLine('çœŸçš„å—ï¼Ÿæˆ‘ä¹Ÿæƒ³å»æ—¥æœ¬ï¼')">
                    <div class="font-semibold text-green-700">J (Jeremy) - Line 1:</div>
                    <div class="mt-1 font-medium">çœŸçš„å—ï¼Ÿæˆ‘ä¹Ÿæƒ³å»æ—¥æœ¬ï¼</div>
                    <div class="text-gray-600 italic">zhÄ“n de ma? wÇ’ yÄ› xiÇng qÃ¹ rÃ¬bÄ›n!</div>
                    <div class="text-gray-500 text-xs mt-1">Really? I also want to go to Japan!</div>
                </div>

                <div class="p-3 bg-gray-50 rounded cursor-pointer hover:bg-gray-100 transition" onclick="playScriptLine('å™¢ï¼Œä½ æƒ³å»å“ªä¸€ä¸ªåŸå¸‚å‘¢ï¼Ÿ')">
                    <div class="font-semibold text-gray-700">F:</div>
                    <div class="mt-1">å™¢ï¼Œä½ æƒ³å»å“ªä¸€ä¸ªåŸå¸‚å‘¢ï¼Ÿ</div>
                    <div class="text-gray-600 italic">Å, nÇ xiÇng qÃ¹ nÇ yÄ«gÃ¨ chÃ©ngshÃ¬ ne?</div>
                    <div class="text-gray-500 text-xs mt-1">Oh, what city do you want to go to?</div>
                </div>

                <div class="p-3 bg-green-50 rounded border-l-4 border-green-500 cursor-pointer hover:bg-green-100 transition" onclick="playScriptLine('æˆ‘æƒ³å»å¤§é˜ªã€‚å®ƒä»¬æœ‰å¾ˆå¥½åƒçš„èœã€‚')">
                    <div class="font-semibold text-green-700">J - Line 2:</div>
                    <div class="mt-1 font-medium">æˆ‘æƒ³å»å¤§é˜ªã€‚å®ƒä»¬æœ‰å¾ˆå¥½åƒçš„èœã€‚</div>
                    <div class="text-gray-600 italic">wÇ’ xiÇng qÃ¹ dÃ bÇn. tÄmen yÇ’u hÄ›n hÇochÄ« de cÃ i.</div>
                    <div class="text-gray-500 text-xs mt-1">I want to go to Osaka. They have great food.</div>
                </div>

                <div class="p-3 bg-gray-50 rounded cursor-pointer hover:bg-gray-100 transition" onclick="playScriptLine('å¤§é˜ªï¼Ÿå¤§é˜ªåˆ°åº•åœ¨æ—¥æœ¬å“ªé‡Œï¼Ÿ')">
                    <div class="font-semibold text-gray-700">S:</div>
                    <div class="mt-1">å¤§é˜ªï¼Ÿå¤§é˜ªåˆ°åº•åœ¨æ—¥æœ¬å“ªé‡Œï¼Ÿ</div>
                    <div class="text-gray-600 italic">dÃ bÇn? dÃ bÇn dÃ odÇ zÃ i rÃ¬bÄ›n nÇlÇ?</div>
                    <div class="text-gray-500 text-xs mt-1">Osaka? Where is that in Japan?</div>
                </div>

                <div class="p-3 bg-gray-50 rounded cursor-pointer hover:bg-gray-100 transition" onclick="playScriptLine('å¤§é˜ªæ˜¯åœ¨æ—¥æœ¬çš„å—è¾¹ã€‚å“ï¼Œä¹ä¹ï¼Œä½ ä¸ºä»€ä¹ˆè¦å»è¥¿ç­ç‰™å‘¢ï¼Ÿ')">
                    <div class="font-semibold text-gray-700">F:</div>
                    <div class="mt-1">å¤§é˜ªæ˜¯åœ¨æ—¥æœ¬çš„å—è¾¹ã€‚å“ï¼Œä¹ä¹ï¼Œä½ ä¸ºä»€ä¹ˆè¦å»è¥¿ç­ç‰™å‘¢ï¼Ÿ</div>
                    <div class="text-gray-600 italic">dÃ bÇn shÃ¬ zÃ i rÃ¬bÄ›n de nÃ¡nbiÄn. Äi, lÃ¨lÃ¨, nÇ wÃ¨ishÃ©nme yÃ o qÃ¹ xÄ«bÄnyÃ¡ ne?</div>
                    <div class="text-gray-500 text-xs mt-1">Osaka is in the south of Japan. Hey, Sophia, why do you want to go to Spain?</div>
                </div>

                <div class="p-3 bg-gray-50 rounded cursor-pointer hover:bg-gray-100 transition" onclick="playScriptLine('å› ä¸ºï¼Œæˆ‘çš„çˆ¸çˆ¸æ˜¯è¥¿ç­ç‰™äººï¼Œæ‰€ä»¥æˆ‘è¦å»è¥¿ç­ç‰™å­¦è¥¿ç­ç‰™è¯­ã€‚ä½ ä»¬çœ‹å¾—å‡ºæ¥çœ‹ä¸å‡ºæ¥æˆ‘æ˜¯ä¸€ä¸ªè¥¿ç­ç‰™äººï¼Ÿ')">
                    <div class="font-semibold text-gray-700">S:</div>
                    <div class="mt-1">å› ä¸ºï¼Œæˆ‘çš„çˆ¸çˆ¸æ˜¯è¥¿ç­ç‰™äººï¼Œæ‰€ä»¥æˆ‘è¦å»è¥¿ç­ç‰™å­¦è¥¿ç­ç‰™è¯­ã€‚ä½ ä»¬çœ‹å¾—å‡ºæ¥çœ‹ä¸å‡ºæ¥æˆ‘æ˜¯ä¸€ä¸ªè¥¿ç­ç‰™äººï¼Ÿ</div>
                    <div class="text-gray-600 italic">yÄ«nwÃ¨i, wÇ’ de bÃ ba shÃ¬ xÄ«bÄnyÃ¡ rÃ©n, suÇ’yÇ wÇ’ yÃ o qÃ¹ xÄ«bÄnyÃ¡ xuÃ© xÄ«bÄnyÃ¡ yÇ”. nÇmen kÃ n de chÅ«lÃ¡i kÃ n bÃ¹ chÅ«lÃ¡i wÇ’ shÃ¬ yÄ«gÃ¨ xÄ«bÄnyÃ¡ rÃ©n?</div>
                    <div class="text-gray-500 text-xs mt-1">Because my dad is Spanish, I'm going to Spain to learn Spanish. Can you guys tell that I'm Spanish?</div>
                </div>

                <div class="p-3 bg-green-50 rounded border-l-4 border-green-500 cursor-pointer hover:bg-green-100 transition" onclick="playScriptLine('æˆ‘è§‰å¾—ä½ çœ‹èµ·æ¥åƒä¸­å›½äººã€‚')">
                    <div class="font-semibold text-green-700">J - Line 3:</div>
                    <div class="mt-1 font-medium">æˆ‘è§‰å¾—ä½ çœ‹èµ·æ¥åƒä¸­å›½äººã€‚</div>
                    <div class="text-gray-600 italic">wÇ’ juÃ©de nÇ kÃ n qÇlÃ¡i xiÃ ng zhÅngguÃ³ rÃ©n.</div>
                    <div class="text-gray-500 text-xs mt-1">I feel like you resemble a Chinese person.</div>
                </div>

                <div class="p-3 bg-gray-50 rounded cursor-pointer hover:bg-gray-100 transition" onclick="playScriptLine('å¾ˆå¤šäººéƒ½ä¸€æ ·çš„è¯´ã€‚å“ï¼ŒWu qi naï¼Œä½ ä¸ºä»€ä¹ˆè¦å»æ—¥æœ¬å‘¢ï¼Ÿ')">
                    <div class="font-semibold text-gray-700">S:</div>
                    <div class="mt-1">å¾ˆå¤šäººéƒ½ä¸€æ ·çš„è¯´ã€‚å“ï¼ŒWu qi naï¼Œä½ ä¸ºä»€ä¹ˆè¦å»æ—¥æœ¬å‘¢ï¼Ÿ</div>
                    <div class="text-gray-600 italic">hÄ›n duÅ rÃ©n dÅu yÄ«yÃ ng de shuÅ. Äi, Wu qi na, nÇ wÃ¨ishÃ©nme yÃ o qÃ¹ rÃ¬bÄ›n ne?</div>
                    <div class="text-gray-500 text-xs mt-1">A lotta people say that. Why did you want to go to Japan, Fiona?</div>
                </div>

                <div class="p-3 bg-gray-50 rounded cursor-pointer hover:bg-gray-100 transition" onclick="playScriptLine('å› ä¸ºæˆ‘å¤§äºŒä»¥å‰å­¦è¿‡æ—¥è¯­ï¼Œæ‰€ä»¥æˆ‘ä»Šå¹´æƒ³å»æ—¥æœ¬ã€‚')">
                    <div class="font-semibold text-gray-700">F:</div>
                    <div class="mt-1">å› ä¸ºæˆ‘å¤§äºŒä»¥å‰å­¦è¿‡æ—¥è¯­ï¼Œæ‰€ä»¥æˆ‘ä»Šå¹´æƒ³å»æ—¥æœ¬ã€‚</div>
                    <div class="text-gray-600 italic">yÄ«nwÃ¨i wÇ’ dÃ  Ã¨r yÇqiÃ¡n xuÃ©guÃ² rÃ¬yÇ”, suÇ’yÇ wÇ’ jÄ«nniÃ¡n xiÇng qÃ¹ rÃ¬bÄ›n.</div>
                    <div class="text-gray-500 text-xs mt-1">I studied Japanese before my sophomore year, so I want to go to Japan this year.</div>
                </div>

                <div class="p-3 bg-green-50 rounded border-l-4 border-green-500 cursor-pointer hover:bg-green-100 transition" onclick="playScriptLine('å•Šå•Šå•Šï¼Œè™½ç„¶æˆ‘æ²¡å­¦è¿‡æ—¥è¯­ï¼Œä½†æ˜¯æˆ‘çŸ¥é“å¾ˆå¤šæ—¥æœ¬çš„æ–‡åŒ–ã€‚')">
                    <div class="font-semibold text-green-700">J - Line 4:</div>
                    <div class="mt-1 font-medium">å•Šå•Šå•Šï¼Œè™½ç„¶æˆ‘æ²¡å­¦è¿‡æ—¥è¯­ï¼Œä½†æ˜¯æˆ‘çŸ¥é“å¾ˆå¤šæ—¥æœ¬çš„æ–‡åŒ–ã€‚</div>
                    <div class="text-gray-600 italic">ÄÄÄÄ, suÄ«rÃ¡n wÇ’ mÃ©i xuÃ©guÃ² rÃ¬yÇ”, dÃ nshÃ¬ wÇ’ zhÄ«dÃ o hÄ›n duÅ rÃ¬bÄ›n de wÃ©nhuÃ .</div>
                    <div class="text-gray-500 text-xs mt-1">Ahhh, although I haven't studied Japanese, I know a lot about Japanese culture.</div>
                </div>

                <div class="p-3 bg-gray-50 rounded cursor-pointer hover:bg-gray-100 transition" onclick="playScriptLine('é‚£ï¼Œä½ ä»¬æ€ä¹ˆå»æ—¥æœ¬å‘¢ï¼Ÿ')">
                    <div class="font-semibold text-gray-700">S:</div>
                    <div class="mt-1">é‚£ï¼Œä½ ä»¬æ€ä¹ˆå»æ—¥æœ¬å‘¢ï¼Ÿ</div>
                    <div class="text-gray-600 italic">nÃ , nÇmen zÄ›nme qÃ¹ rÃ¬bÄ›n ne?</div>
                    <div class="text-gray-500 text-xs mt-1">How are you going to get there?</div>
                </div>

                <div class="p-3 bg-gray-50 rounded cursor-pointer hover:bg-gray-100 transition" onclick="playScriptLine('æˆ‘ä¼šåé£æœºå»å› ä¸ºé£æœºæ¯”èˆ¹å¿«å¾—å¤šã€‚Jeremyï¼Œä½ åœ¨æ—¥æœ¬æƒ³åƒä»€ä¹ˆï¼Ÿ')">
                    <div class="font-semibold text-gray-700">F:</div>
                    <div class="mt-1">æˆ‘ä¼šåé£æœºå»å› ä¸ºé£æœºæ¯”èˆ¹å¿«å¾—å¤šã€‚Jeremyï¼Œä½ åœ¨æ—¥æœ¬æƒ³åƒä»€ä¹ˆï¼Ÿ</div>
                    <div class="text-gray-600 italic">wÇ’ huÃ¬ zuÃ² fÄ“ijÄ« qÃ¹ yÄ«nwÃ¨i fÄ“ijÄ« bÇ chuÃ¡n kuÃ i de duÅ. Jeremy, nÇ zÃ i rÃ¬bÄ›n xiÇng chÄ« shÃ©nme?</div>
                    <div class="text-gray-500 text-xs mt-1">I'm going to go by plane because plane is much faster than boat. Jeremy, what do you want to eat in Japan?</div>
                </div>

                <div class="p-3 bg-green-50 rounded border-l-4 border-green-500 cursor-pointer hover:bg-green-100 transition" onclick="playScriptLine('æˆ‘ä»€ä¹ˆéƒ½æƒ³åƒï¼ä¹ä¹ï¼Œè¥¿ç­ç‰™çš„èœå¥½åƒå—ï¼Ÿ')">
                    <div class="font-semibold text-green-700">J - Line 5:</div>
                    <div class="mt-1 font-medium">æˆ‘ä»€ä¹ˆéƒ½æƒ³åƒï¼ä¹ä¹ï¼Œè¥¿ç­ç‰™çš„èœå¥½åƒå—ï¼Ÿ</div>
                    <div class="text-gray-600 italic">wÇ’ shÃ©nme dÅu xiÇng chÄ«! lÃ¨lÃ¨, xÄ«bÄnyÃ¡ de cÃ i hÇochÄ« ma?</div>
                    <div class="text-gray-500 text-xs mt-1">I want to eat anything! Sophia, is the food in Spain good?</div>
                </div>

                <div class="p-3 bg-gray-50 rounded cursor-pointer hover:bg-gray-100 transition" onclick="playScriptLine('æœ‰çš„å¥½åƒï¼Œæœ‰çš„ä¸å¥½åƒã€‚æˆ‘è§‰å¾— Paella éå¸¸éå¸¸å¥½åƒçš„ã€‚')">
                    <div class="font-semibold text-gray-700">S:</div>
                    <div class="mt-1">æœ‰çš„å¥½åƒï¼Œæœ‰çš„ä¸å¥½åƒã€‚æˆ‘è§‰å¾— Paella éå¸¸éå¸¸å¥½åƒçš„ã€‚</div>
                    <div class="text-gray-600 italic">yÇ’u de hÇochÄ«, yÇ’u de bÃ¹ hÇochÄ«. wÇ’ juÃ©de Paella fÄ“ichÃ¡ng fÄ“ichÃ¡ng hÇochÄ« de.</div>
                    <div class="text-gray-500 text-xs mt-1">Some is good, some is not good. I think Paella is very, very delicious.</div>
                </div>

                <div class="p-3 bg-green-50 rounded border-l-4 border-green-500 cursor-pointer hover:bg-green-100 transition" onclick="playScriptLine('å¬èµ·æ¥å¾ˆå¥½åƒï¼æˆ‘ä¹Ÿæƒ³æœ‰ä¸€å¤©å»è¥¿ç­ç‰™ã€‚')">
                    <div class="font-semibold text-green-700">J - Line 6 (Conclusion):</div>
                    <div class="mt-1 font-medium">å¬èµ·æ¥å¾ˆå¥½åƒï¼æˆ‘ä¹Ÿæƒ³æœ‰ä¸€å¤©å»è¥¿ç­ç‰™ã€‚</div>
                    <div class="text-gray-600 italic">tÄ«ng qÇlÃ¡i hÄ›n hÇochÄ«! wÇ’ yÄ› xiÇng yÇ’u yÄ«tiÄn qÃ¹ xÄ«bÄnyÃ¡.</div>
                    <div class="text-gray-500 text-xs mt-1">Sounds delicious! I also want to go to Spain one day.</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const jeremyLines = [
            {
                number: "J1",
                chinese: "çœŸçš„å—ï¼Ÿæˆ‘ä¹Ÿæƒ³å»æ—¥æœ¬ï¼",
                pinyin: "zhÄ“n de ma? wÇ’ yÄ› xiÇng qÃ¹ rÃ¬bÄ›n!",
                translation: "Really? I also want to go to Japan!",
                context: "Response to Fiona saying she wants to go to Japan"
            },
            {
                number: "J2",
                chinese: "æˆ‘æƒ³å»å¤§é˜ªã€‚å®ƒä»¬æœ‰å¾ˆå¥½åƒçš„èœã€‚",
                pinyin: "wÇ’ xiÇng qÃ¹ dÃ bÇn. tÄmen yÇ’u hÄ›n hÇochÄ« de cÃ i.",
                translation: "I want to go to Osaka. They have great food.",
                context: "Answering which city in Japan you want to visit"
            },
            {
                number: "J3",
                chinese: "æˆ‘è§‰å¾—ä½ çœ‹èµ·æ¥åƒä¸­å›½äººã€‚",
                pinyin: "wÇ’ juÃ©de nÇ kÃ n qÇlÃ¡i xiÃ ng zhÅngguÃ³ rÃ©n.",
                translation: "I feel like you resemble a Chinese person.",
                context: "Response to Sophia asking if she looks Spanish"
            },
            {
                number: "J4",
                chinese: "å•Šå•Šå•Šï¼Œè™½ç„¶æˆ‘æ²¡å­¦è¿‡æ—¥è¯­ï¼Œä½†æ˜¯æˆ‘çŸ¥é“å¾ˆå¤šæ—¥æœ¬çš„æ–‡åŒ–ã€‚",
                pinyin: "ÄÄÄÄ, suÄ«rÃ¡n wÇ’ mÃ©i xuÃ©guÃ² rÃ¬yÇ”, dÃ nshÃ¬ wÇ’ zhÄ«dÃ o hÄ›n duÅ rÃ¬bÄ›n de wÃ©nhuÃ .",
                translation: "Ahhh, although I haven't studied Japanese, I know a lot about Japanese culture.",
                context: "Responding to the conversation about learning Japanese"
            },
            {
                number: "J5",
                chinese: "æˆ‘ä»€ä¹ˆéƒ½æƒ³åƒï¼ä¹ä¹ï¼Œè¥¿ç­ç‰™çš„èœå¥½åƒå—ï¼Ÿ",
                pinyin: "wÇ’ shÃ©nme dÅu xiÇng chÄ«! lÃ¨lÃ¨, xÄ«bÄnyÃ¡ de cÃ i hÇochÄ« ma?",
                translation: "I want to eat anything! Sophia, is the food in Spain good?",
                context: "When Fiona asks what you want to eat in Japan"
            },
            {
                number: "J6 (Conclusion)",
                chinese: "å¬èµ·æ¥å¾ˆå¥½åƒï¼æˆ‘ä¹Ÿæƒ³æœ‰ä¸€å¤©å»è¥¿ç­ç‰™ã€‚",
                pinyin: "tÄ«ng qÇlÃ¡i hÄ›n hÇochÄ«! wÇ’ yÄ› xiÇng yÇ’u yÄ«tiÄn qÃ¹ xÄ«bÄnyÃ¡.",
                translation: "Sounds delicious! I also want to go to Spain one day.",
                context: "Final line, responding to Sophia talking about Spanish food"
            }
        ];

        let currentIndex = 0;
        let order = [...Array(jeremyLines.length).keys()];

        function displayLine(index) {
            const line = jeremyLines[order[index]];
            const card = document.getElementById('practiceCard');

            card.innerHTML = `
                <div class="mb-4">
                    <span class="inline-block bg-green-100 text-green-800 text-sm font-semibold px-3 py-1 rounded">
                        ${line.number}
                    </span>
                </div>

                <div class="mb-6 p-4 bg-gray-50 rounded border-l-4 border-gray-400">
                    <div class="text-sm text-gray-600 uppercase tracking-wide mb-2">Context:</div>
                    <div class="text-gray-700">${line.context}</div>
                </div>

                <div class="mb-6 p-4 bg-blue-50 rounded border-l-4 border-blue-400">
                    <div class="text-sm text-gray-600 uppercase tracking-wide mb-2">English Translation:</div>
                    <div class="text-lg text-gray-800">${line.translation}</div>
                </div>

                <div class="mb-6 p-6 bg-yellow-50 rounded border-l-4 border-yellow-400">
                    <div class="text-sm text-gray-600 uppercase tracking-wide mb-3">Chinese:</div>
                    <div id="chineseText" class="text-3xl font-medium text-gray-900 blur-md select-none transition-all duration-300">
                        ${line.chinese}
                    </div>
                </div>

                <div class="p-6 bg-purple-50 rounded border-l-4 border-purple-400">
                    <div class="text-sm text-gray-600 uppercase tracking-wide mb-3">Pinyin:</div>
                    <div id="pinyinText" class="text-xl text-gray-700 italic blur-md select-none transition-all duration-300">
                        ${line.pinyin}
                    </div>
                </div>
            `;

            document.getElementById('currentLineNum').textContent = index + 1;
            document.getElementById('totalLines').textContent = jeremyLines.length;
        }

        function revealChinese() {
            const elem = document.getElementById('chineseText');
            if (elem) {
                elem.classList.remove('blur-md', 'select-none');
            }
        }

        function revealPinyin() {
            const elem = document.getElementById('pinyinText');
            if (elem) {
                elem.classList.remove('blur-md', 'select-none');
            }
        }

        function playAudio() {
            const line = jeremyLines[order[currentIndex]];
            const utterance = new SpeechSynthesisUtterance(line.chinese);
            utterance.lang = 'zh-CN';
            utterance.rate = 0.75;
            speechSynthesis.cancel(); // Cancel any ongoing speech
            speechSynthesis.speak(utterance);
        }

        function playScriptLine(text) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'zh-CN';
            utterance.rate = 0.75;
            speechSynthesis.cancel(); // Cancel any ongoing speech
            speechSynthesis.speak(utterance);
        }

        function nextLine() {
            currentIndex = (currentIndex + 1) % jeremyLines.length;
            displayLine(currentIndex);
        }

        function prevLine() {
            currentIndex = (currentIndex - 1 + jeremyLines.length) % jeremyLines.length;
            displayLine(currentIndex);
        }

        function shuffle() {
            for (let i = order.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [order[i], order[j]] = [order[j], order[i]];
            }
            currentIndex = 0;
            displayLine(currentIndex);
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Don't trigger shortcuts if command palette is open
            const palette = document.getElementById('commandPalette');
            if (palette && palette.style.display !== 'none') return;

            switch(e.key) {
                case 'ArrowRight':
                    e.preventDefault();
                    nextLine();
                    break;
                case 'ArrowLeft':
                    e.preventDefault();
                    prevLine();
                    break;
                case 'c':
                case 'C':
                    revealChinese();
                    break;
                case 'p':
                case 'P':
                    revealPinyin();
                    break;
                case ' ':
                    e.preventDefault();
                    playAudio();
                    break;
                case 's':
                case 'S':
                    shuffle();
                    break;
            }
        });

        // Initialize
        displayLine(currentIndex);
    </script>
</body>
</html>
