<!DOCTYPE html>
<html lang="zh-CN" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google" content="notranslate">
    <title>Common Words & Connectives - Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5/dist/hanzi-writer.min.js"></script>
    <link rel="stylesheet" href="css/common.css">
    <style>
        html, body {
            height: 100%;
            overflow: hidden;
        }

        /* Confidence pane on the right for this experimental page */
        body.experimental-layout #confidencePanel {
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            width: 240px;
            overflow: hidden;
            background: linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);
            border-left: 1px solid #e5e7eb;
            box-shadow: -6px 0 20px rgba(0,0,0,0.05);
            padding: 0.65rem 0.85rem 0.85rem;
            margin-top: 0 !important;
            z-index: 40;
            font-size: 0.8rem;
            display: flex;
            flex-direction: column;
            gap: 0.35rem;
        }

        body.experimental-layout #confidencePanel .space-y-1 { margin-top: 0.35rem; }
        body.experimental-layout #confidencePanel .border-t { border-top: none !important; }
        body.experimental-layout #confidencePanel .pt-4 { padding-top: 0 !important; }
        body.experimental-layout #confidencePanel #confidenceList {
            flex: 1;
            overflow-y: auto;
            min-height: 0;
            padding-bottom: 0.5rem;
            max-height: none !important;
        }

        /* Add breathing room so content doesn't sit under the right pane */
        body.experimental-layout .app-container {
            padding-right: 16rem;
            min-height: 100vh;
        }

        /* Hide confidence panel on smaller screens */
        @media (max-width: 1024px) {
            body.experimental-layout #confidencePanel {
                display: none;
            }
            body.experimental-layout .app-container {
                padding-right: 0;
            }
        }

        /* Main layout */
        .app-container {
            display: flex;
            height: 100vh;
            width: 100vw;
        }

        /* Sidebar (match standard pages) */
        .sidebar {
            width: 16rem;
            flex-shrink: 0;
            background: #ffffff;
            box-shadow: 0 10px 25px rgba(0,0,0,0.06);
            padding: 1rem;
            overflow-y: auto;
        }

        .sidebar h2 {
            font-size: 1.125rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 1rem;
            margin-top: 3rem;
            text-transform: none;
            letter-spacing: 0;
        }

        .sidebar .mode-desc {
            font-size: 0.875rem;
            color: #9ca3af;
            margin-bottom: 0.75rem;
            line-height: 1.4;
        }

        .sidebar .mode-btn {
            display: block;
            width: 100%;
            padding: 0.5rem 0.75rem;
            margin-bottom: 0.25rem;
            border-radius: 0.75rem;
            border: 2px solid #d1d5db;
            background: #ffffff;
            text-align: left;
            font-size: 0.9rem;
            color: #374151;
            cursor: pointer;
            transition: background 0.15s, border-color 0.15s, color 0.15s;
        }

        .sidebar .mode-btn:hover {
            background: #f3f4f6;
        }

        .sidebar .mode-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        /* Main content area */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-width: 0;
            padding: 1rem 2rem;
            overflow: hidden;
        }

        /* Header with title and toolbar */
        .quiz-header {
            flex-shrink: 0;
            text-align: center;
            padding-bottom: 0.5rem;
        }

        .quiz-header h1 {
            font-size: 1.125rem;
            font-weight: 600;
            color: #374151;
            margin: 0;
        }

        /* Quiz display area - grows to fill space */
        .quiz-display {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 0;
            padding: 1rem 0;
        }

        #questionDisplay {
            width: 100%;
        }

        /* Three-column layout tweaks */
        .three-column-meaning-layout {
            margin: 0 auto;
            padding: 0.5rem;
            gap: 2rem;
        }

        .three-column-meaning-layout .column-char-large {
            font-size: clamp(56px, 12vw, 120px);
        }

        .three-column-meaning-layout .column-char {
            font-size: clamp(28px, 5vw, 40px);
        }

        .three-column-meaning-layout .column-card {
            min-height: auto;
            padding: 0.5rem;
        }

        /* Input section - fixed at bottom */
        .input-section {
            flex-shrink: 0;
            max-width: 32rem;
            width: 100%;
            margin: 0 auto;
            padding-top: 1rem;
        }

        .input-section input[type="text"] {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.15s;
        }

        .input-section input[type="text"]:focus {
            border-color: #3b82f6;
        }

        .choice-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
        }

        .choice-grid button {
            padding: 0.875rem 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            background: white;
            font-size: 0.9375rem;
            cursor: pointer;
            transition: all 0.15s;
        }

        .choice-grid button:hover {
            border-color: #3b82f6;
            background: #eff6ff;
        }

        /* Stats bar */
        .stats-bar {
            flex-shrink: 0;
            display: flex;
            justify-content: center;
            gap: 2rem;
            padding: 0.75rem 0;
            font-size: 0.875rem;
            color: #6b7280;
            border-top: 1px solid #f3f4f6;
            margin-top: auto;
        }

        .stats-bar span {
            font-weight: 500;
        }

        /* Feedback area */
        #feedback {
            min-height: 2rem;
            text-align: center;
            font-size: 1.25rem;
            font-weight: 600;
            padding: 0.5rem 0;
        }

        /* Hide sections by default */
        #typeMode, #choiceMode, #fuzzyMode, #strokeOrderMode,
        #handwritingMode, #drawCharMode, #studyMode {
            display: none;
        }

        #typeMode.active, #choiceMode.active, #fuzzyMode.active,
        #strokeOrderMode.active, #handwritingMode.active,
        #drawCharMode.active, #studyMode.active {
            display: block;
        }

        /* Study mode needs full width - remove input-section constraint */
        body.study-mode-active .input-section {
            max-width: none;
            flex-direction: column;
        }

        #studyMode.active {
            width: 100%;
        }

        /* Hide feedback in study mode */
        body.study-mode-active #feedback {
            display: none;
        }

        /* Home button */
        .home-btn {
            position: fixed;
            top: 1rem;
            left: 1rem;
            padding: 0.375rem 0.75rem;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            color: #374151;
            text-decoration: none;
            z-index: 50;
            transition: background 0.15s;
        }

        .home-btn:hover {
            background: #f3f4f6;
        }

        /* Audio button */
        #audioSection button {
            padding: 0.75rem 1.5rem;
            background: #06b6d4;
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.15s;
        }

        #audioSection button:hover {
            background: #0891b2;
        }
    </style>
    <script src="js/utils.js"></script>
    <script src="js/command-palette.js"></script>
    <script src="js/etymology-loader.js"></script>
    <script src="js/pinyin-utils.js"></script>
    <script src="js/engine/ai-service.js"></script>
    <script src="js/engine/chat.js"></script>
    <script src="js/quiz-engine.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase-sync.js"></script>
</head>
<body class="experimental-layout">
    <a href="home.html" class="home-btn">‚Üê Home</a>

    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar w-64 bg-white shadow-lg">
            <h2>Quiz Modes</h2>
            <p class="mode-desc">Choose a mode, then answer in the panel to the right.</p>
            <nav>
                <button class="mode-btn" data-mode="char-to-meaning-type">Char ‚Üí Meaning</button>
                <button class="mode-btn" data-mode="char-to-pinyin">Char ‚Üí Pinyin</button>
                <button class="mode-btn" data-mode="char-to-pinyin-type">Char ‚Üí Pinyin (MC)</button>
                <button class="mode-btn" data-mode="char-to-pinyin-tones-mc">Char ‚Üí Pinyin ‚Üí Tones (MC)</button>
                <button class="mode-btn" data-mode="char-to-tones">Char ‚Üí Tones</button>
                <button class="mode-btn" data-mode="audio-to-pinyin">Audio ‚Üí Pinyin</button>
                <button class="mode-btn" data-mode="pinyin-to-char">Pinyin ‚Üí Char</button>
                <button class="mode-btn" data-mode="audio-to-meaning">Audio ‚Üí Meaning</button>
                <button class="mode-btn" data-mode="meaning-to-char">Meaning ‚Üí Char</button>
                <button class="mode-btn" data-mode="stroke-order">Stroke Order</button>
                <button class="mode-btn" data-mode="handwriting">Handwriting</button>
                <button class="mode-btn" data-mode="draw-char">Draw Character</button>
                <button class="mode-btn" data-mode="study">Study Mode</button>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="quiz-header">
                <h1>Common Words & Connectives ¬∑ High-frequency words for dictation</h1>
            </header>

            <!-- Quiz Display -->
            <section class="quiz-display">
                <div id="questionDisplay"></div>

                <div id="upcomingCharacters" class="hidden" style="margin-top: 1rem;">
                    <div class="preview-list" style="display: flex; justify-content: center; gap: 1rem; font-size: 2rem; color: #d1d5db;"></div>
                    <div style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.1em; color: #9ca3af; margin-top: 0.5rem;">Upcoming</div>
                </div>

                <div id="hint" style="font-size: 1.5rem; font-weight: 600; margin: 1rem 0;"></div>

                <div id="audioSection" class="hidden" style="margin: 1rem 0;">
                    <button id="playAudioBtn">üîä Play Sound</button>
                </div>
            </section>

            <!-- Input Section -->
            <section class="input-section">
                <!-- Type Mode -->
                <div id="typeMode">
                    <input type="text" id="answerInput" placeholder="Type your answer...">
                    <button id="checkBtn" style="display: none;">Check Answer</button>
                </div>

                <!-- Choice Mode -->
                <div id="choiceMode">
                    <div id="options" class="choice-grid"></div>
                </div>

                <!-- Fuzzy Mode -->
                <div id="fuzzyMode">
                    <input type="text" id="fuzzyInput" placeholder="Type your answer...">
                    <div id="fuzzyOptions" class="choice-grid" style="margin-top: 0.75rem;"></div>
                </div>

                <!-- Stroke Order Mode -->
                <div id="strokeOrderMode">
                    <div id="strokeOrderWriter" style="display: flex; justify-content: center;"></div>
                </div>

                <!-- Handwriting Mode -->
                <div id="handwritingMode">
                    <p style="text-align: center; color: #6b7280; margin-bottom: 1rem;">Practice writing on paper, then reveal the answer</p>

                    <div id="handwritingWriter" style="display: flex; justify-content: center; gap: 10px;"></div>
                    <div style="display: flex; justify-content: center; gap: 0.75rem; margin-top: 1rem;">
                        <button id="hwShowBtn" style="padding: 0.75rem 2rem; background: #3b82f6; color: white; border: none; border-radius: 0.5rem; cursor: pointer;">Show Answer</button>
                        <button id="hwNextBtn" style="padding: 0.75rem 2rem; background: #22c55e; color: white; border: none; border-radius: 0.5rem; cursor: pointer;">Next</button>
                    </div>
                                    <p id="hwSpaceHint" class="text-center text-sm text-gray-500 mt-2">Space: show ‚Üí tap ‚úì correct ¬∑ hold ‚úó wrong</p>
                </div>

                <!-- Draw Character Mode -->
                <div id="drawCharMode">
                    <div style="text-align: center; margin-bottom: 1rem;">
                        <div id="ocrResult" style="font-size: 3.5rem; min-height: 5rem; color: #3b82f6; font-weight: 700;"></div>
                        <div style="font-size: 0.875rem; color: #9ca3af;">Real-time recognition</div>
                    </div>
                    <canvas id="drawCanvas" style="display: block; margin: 0 auto; border: 2px solid #d1d5db; border-radius: 0.5rem; cursor: crosshair;" width="300" height="300"></canvas>
                    <div style="display: flex; justify-content: center; gap: 0.75rem; margin-top: 1rem;">
                        <button id="clearCanvasBtn" style="padding: 0.5rem 1.5rem; background: #ef4444; color: white; border: none; border-radius: 0.5rem; cursor: pointer;">Clear</button>
                        <button id="submitDrawBtn" style="padding: 0.5rem 1.5rem; background: #22c55e; color: white; border: none; border-radius: 0.5rem; cursor: pointer;">Submit</button>
                        <button id="fullscreenDrawBtn" style="padding: 0.5rem 1.5rem; background: #3b82f6; color: white; border: none; border-radius: 0.5rem; cursor: pointer;">Fullscreen</button>
                    </div>
                </div>

                <!-- Study Mode -->
                <div id="studyMode">
                    <div style="text-align: center; color: #6b7280; margin-bottom: 1rem;">Study common words organized by category</div>
                    <div id="studyList" style="max-height: 400px; overflow-y: auto;"></div>
                </div>

                <!-- Missing Component Mode -->
                <div id="missingComponentMode" style="display: none;">
                    <input type="text" id="componentInput" placeholder="Type component pinyin..." style="width: 100%; padding: 0.75rem 1rem; font-size: 1.25rem; border: 2px solid #d1d5db; border-radius: 0.5rem; text-align: center; margin-bottom: 1rem;">
                    <div id="componentOptions" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem;"></div>
                </div>

                <!-- Character Building Mode -->
                <div id="charBuildingMode" style="display: none;">
                    <input type="text" id="charBuildingInput" placeholder="Type component pinyin..." style="width: 100%; padding: 0.75rem 1rem; font-size: 1.25rem; border: 2px solid #d1d5db; border-radius: 0.5rem; text-align: center; margin-bottom: 1rem;">
                    <div id="charBuildingOptions" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem;"></div>
                </div>

                <!-- Feedback -->
                <div id="feedback"></div>
            </section>

            <!-- Stats Bar -->
            <footer class="stats-bar" id="stats">
                <div>Score: <span id="score">0</span>/<span id="total">0</span></div>
                <div>Accuracy: <span id="accuracy">0%</span></div>
            </footer>
        </main>
    </div>

    <script>
        const characters = [
            // === CONJUNCTIONS & CONNECTIVES ===
            { char: 'ÂèØÊòØ', pinyin: 'kƒõ.sh√¨', meaning: 'however; but', category: 'Connectives' },
            { char: 'Âõ†‰∏∫', pinyin: 'yƒ´n.w√®i', meaning: 'because; since', category: 'Connectives' },
            { char: 'ËôΩÁÑ∂', pinyin: 'suƒ´r√°n', meaning: 'although', category: 'Connectives' },
            { char: 'ÈÇ£‰πà', pinyin: 'n√†.me', meaning: 'well then; then', category: 'Connectives' },
            { char: 'ËÄå', pinyin: '√©r', meaning: 'and; yet', category: 'Connectives' },
            { char: '‰ΩÜÊòØ', pinyin: 'd√†n.sh√¨', meaning: 'but', category: 'Connectives' },
            { char: 'Âç¥', pinyin: 'qu√®', meaning: 'but; however', category: 'Connectives' },
            { char: 'ÊâÄ‰ª•', pinyin: 'su«í.y«ê', meaning: 'therefore', category: 'Connectives' },
            { char: 'Âè™Ë¶Å', pinyin: 'zh«êy√†o', meaning: 'as long as; provided that', category: 'Connectives' },
            { char: 'Âíå', pinyin: 'h√©', meaning: 'and', category: 'Connectives' },
            { char: 'Ë∑ü', pinyin: 'gƒìn', meaning: 'and; with; to', category: 'Connectives' },

            // === PARTICLES ===
            { char: 'ÁöÑ', pinyin: 'de', meaning: 'particle for modification', category: 'Particles' },
            { char: '‰∫Ü', pinyin: 'le', meaning: 'particle for new situation / completed action', category: 'Particles' },
            { char: 'Âë¢', pinyin: 'ne', meaning: 'particle for follow-up questions', category: 'Particles' },
            { char: 'Âêó', pinyin: '.ma', meaning: 'particle for simple questions', category: 'Particles' },
            { char: 'Âïä', pinyin: '.a', meaning: 'particle showing obviousness', category: 'Particles' },
            { char: 'ÁùÄ', pinyin: '.zhe', meaning: 'keep on V-ing (aspect particle)', category: 'Particles' },
            { char: 'Âæó', pinyin: '.de', meaning: 'predicative complement marker', category: 'Particles' },

            // === ADVERBS ===
            { char: '‰πü', pinyin: 'yƒõ', meaning: 'also; too', category: 'Adverbs' },
            { char: 'ÈÉΩ', pinyin: 'd≈çu', meaning: 'in all cases; all', category: 'Adverbs' },
            { char: 'Ëøò', pinyin: 'h√°i', meaning: 'still; also', category: 'Adverbs' },
            { char: 'Âæà', pinyin: 'hƒõn', meaning: 'very', category: 'Adverbs' },
            { char: 'Â∞±', pinyin: 'ji√π', meaning: 'sooner than expected; as early as', category: 'Adverbs' },
            { char: 'Êâç', pinyin: 'c√°i', meaning: 'later than expected; only then', category: 'Adverbs' },
            { char: 'Âèà', pinyin: 'y√≤u', meaning: 'again', category: 'Adverbs' },
            { char: 'Âπ∂', pinyin: 'b√¨ng', meaning: 'actually (not); used for emphasis', category: 'Adverbs' },
            { char: 'Âè™ÊòØ', pinyin: 'zh«ê.sh√¨', meaning: 'only; just', category: 'Adverbs' },
            { char: 'Â∏∏', pinyin: 'ch√°ng', meaning: 'often', category: 'Adverbs' },
            { char: 'Â§™', pinyin: 't√†i', meaning: 'too; excessively', category: 'Adverbs' },
            { char: 'Áúü', pinyin: 'zhƒìn', meaning: 'really', category: 'Adverbs' },
            { char: 'ÂÆåÂÖ®', pinyin: 'w√°nqu√°n', meaning: 'completely; entirely', category: 'Adverbs' },

            // === COMMON VERBS ===
            { char: 'ÊòØ', pinyin: 'sh√¨', meaning: 'is; am; are', category: 'Common Verbs' },
            { char: 'Êúâ', pinyin: 'y«íu', meaning: 'have; there be', category: 'Common Verbs' },
            { char: 'Ê≤°Êúâ', pinyin: 'm√©iy«íu', meaning: 'have not; there is not', category: 'Common Verbs' },
            { char: 'Âú®', pinyin: 'z√†i', meaning: 'be located in; at; on', category: 'Common Verbs' },
            { char: 'ËØ¥', pinyin: 'shu≈ç', meaning: 'speak; say; talk', category: 'Common Verbs' },
            { char: 'Êù•', pinyin: 'l√°i', meaning: 'come', category: 'Common Verbs' },
            { char: 'Âéª', pinyin: 'q√π', meaning: 'go', category: 'Common Verbs' },
            { char: 'ÊÉ≥', pinyin: 'xi«éng', meaning: 'think; want', category: 'Common Verbs' },
            { char: 'Áü•ÈÅì', pinyin: 'zhƒ´dao', meaning: 'know', category: 'Common Verbs' },
            { char: 'ËßâÂæó', pinyin: 'ju√©.de', meaning: 'think; feel', category: 'Common Verbs' },
            { char: '‰ºö', pinyin: 'hu√¨', meaning: 'could; would; can', category: 'Common Verbs' },
            { char: 'ÂèØ‰ª•', pinyin: 'kƒõy«ê', meaning: 'can; may', category: 'Common Verbs' },
            { char: 'Âæó', pinyin: 'dƒõi', meaning: 'have to; must', category: 'Common Verbs' },
            { char: 'Áªô', pinyin: 'gƒõi', meaning: 'give; for; to', category: 'Common Verbs' },
            { char: 'ÈóÆ', pinyin: 'w√®n', meaning: 'ask', category: 'Common Verbs' },
            { char: 'ÂõûÁ≠î', pinyin: 'hu√≠d√°', meaning: 'answer; respond', category: 'Common Verbs' },
            { char: 'ËØ∑', pinyin: 'q«êng', meaning: 'please; request', category: 'Common Verbs' },
            { char: 'ÂñúÊ¨¢', pinyin: 'x«êhuƒÅn', meaning: 'like', category: 'Common Verbs' },
            { char: 'ÊáÇ', pinyin: 'd«íng', meaning: 'understand', category: 'Common Verbs' },
            { char: 'Áúã', pinyin: 'k√†n', meaning: 'see; look', category: 'Common Verbs' },
            { char: 'Âê¨', pinyin: 'tƒ´ng', meaning: 'listen; hear', category: 'Common Verbs' },
            { char: 'ÂÜô', pinyin: 'xiƒõ', meaning: 'write', category: 'Common Verbs' },
            { char: 'Âè´', pinyin: 'ji√†o', meaning: 'call; be called; tell', category: 'Common Verbs' },
            { char: 'ÂåÖÊã¨', pinyin: 'bƒÅoku√≤', meaning: 'include', category: 'Common Verbs' },

            // === TIME WORDS ===
            { char: 'Áé∞Âú®', pinyin: 'xi√†nz√†i', meaning: 'now', category: 'Time Words' },
            { char: '‰ª•Ââç', pinyin: 'y«êqi√°n', meaning: 'before', category: 'Time Words' },
            { char: 'ÂêéÊù•', pinyin: 'h√≤ul√°i', meaning: 'later', category: 'Time Words' },
            { char: 'ÈÇ£Êó∂', pinyin: 'n√†sh√≠', meaning: 'that time', category: 'Time Words' },
            { char: 'Êó∂ÂÄô', pinyin: 'sh√≠.hou', meaning: 'time', category: 'Time Words' },
            { char: '‰ªäÂ§©', pinyin: 'jƒ´ntiƒÅn', meaning: 'today', category: 'Time Words' },
            { char: 'ÊúâÊó∂', pinyin: 'y«íush√≠', meaning: 'sometimes', category: 'Time Words' },
            { char: 'ÊØèÂ§©', pinyin: 'mƒõitiƒÅn', meaning: 'every day', category: 'Time Words' },
            { char: '‰∏ãÊ¨°', pinyin: 'xi√†c√¨', meaning: 'next time', category: 'Time Words' },
            { char: '‰ªéÂ∞è', pinyin: 'c√≥ngxi«éo', meaning: "from one's childhood", category: 'Time Words' },
            { char: 'Êï¥Â§©', pinyin: 'zhƒõngtiƒÅn', meaning: 'all day long; always', category: 'Time Words' },
            { char: 'Êó∂Èó¥', pinyin: 'sh√≠jiƒÅn', meaning: 'time', category: 'Time Words' },

            // === QUESTION WORDS ===
            { char: '‰ªÄ‰πà', pinyin: 'sh√©n.me', meaning: 'what', category: 'Question Words' },
            { char: 'Âì™ÂÑø', pinyin: 'n«ér', meaning: 'where', category: 'Question Words' },
            { char: '‰∏∫‰ªÄ‰πà', pinyin: 'w√®ish√©n.me', meaning: 'why', category: 'Question Words' },
            { char: 'ÊÄé‰πà', pinyin: 'zƒõn.me', meaning: 'how; how come', category: 'Question Words' },
            { char: 'Âá†', pinyin: 'j«ê', meaning: 'several; a few; how many', category: 'Question Words' },
            { char: 'ÊúâÊ≤°Êúâ', pinyin: 'y«íu m√©iy«íu', meaning: 'have or not? are there?', category: 'Question Words' },
            { char: 'ÂØπ‰∏çÂØπ', pinyin: 'du√¨.bu.du√¨', meaning: 'Is it correct?', category: 'Question Words' },

            // === PRONOUNS ===
            { char: 'Êàë', pinyin: 'w«í', meaning: 'I; me', category: 'Pronouns' },
            { char: '‰Ω†', pinyin: 'n«ê', meaning: 'you', category: 'Pronouns' },
            { char: '‰ªñ', pinyin: 'tƒÅ', meaning: 'he; him', category: 'Pronouns' },
            { char: 'Â•π', pinyin: 'tƒÅ', meaning: 'she; her', category: 'Pronouns' },
            { char: 'Êàë‰ª¨', pinyin: 'w«í.men', meaning: 'we; us', category: 'Pronouns' },
            { char: '‰ªñ‰ª¨', pinyin: 'tƒÅ.men', meaning: 'they; them', category: 'Pronouns' },
            { char: 'Ëøô', pinyin: 'zh√®', meaning: 'this; these', category: 'Pronouns' },
            { char: 'ÈÇ£', pinyin: 'n√†', meaning: 'that; those', category: 'Pronouns' },
            { char: 'ÊúâÁöÑ', pinyin: 'y«íu.de', meaning: 'some', category: 'Pronouns' },

            // === PREPOSITIONS ===
            { char: '‰ªé', pinyin: 'c√≥ng', meaning: 'from', category: 'Prepositions' },
            { char: 'Âà∞', pinyin: 'd√†o', meaning: 'to; arrive', category: 'Prepositions' },
            { char: 'ÊØî', pinyin: 'b«ê', meaning: 'compare (than)', category: 'Prepositions' },
            { char: 'ÁÖß', pinyin: 'zh√†o', meaning: 'according to', category: 'Prepositions' },

            // === COMMON PHRASES & PATTERNS ===
            { char: '‰∏ÄÁÇπÂÑø', pinyin: 'y√¨di«énr', meaning: 'a little', category: 'Common Phrases' },
            { char: '‰∏ÄÊ†∑', pinyin: 'yƒ´y√†ng', meaning: 'same', category: 'Common Phrases' },
            { char: '‰∏ç‰∏ÄÂÆö', pinyin: 'b√πyƒ´d√¨ng', meaning: 'not necessarily', category: 'Common Phrases' },
            { char: 'ÂØπ‰∫Ü', pinyin: 'du√¨.le', meaning: "that's right", category: 'Common Phrases' },
            { char: '‰∏ÄÂÆö', pinyin: 'y√≠d√¨ng', meaning: 'certainly; for sure; must', category: 'Common Phrases' },
            { char: '‰∏çÂ•ΩÊÑèÊÄù', pinyin: 'b√πh«éoy√¨.si', meaning: 'embarrassing; sorry', category: 'Common Phrases' },
            { char: 'Ê≤°Ê≥ï', pinyin: 'm√©i.f«é', meaning: "no way; can't", category: 'Common Phrases' },
            { char: 'ÂæàÈöæËØ¥', pinyin: 'hƒõnn√°nshu≈ç', meaning: "It's hard to say", category: 'Common Phrases' },
            { char: 'Â∞±ÊòØ', pinyin: 'ji√π.sh√¨', meaning: 'be exactly', category: 'Common Phrases' },
            { char: 'Âè™Êúâ', pinyin: 'zh«êy«íu', meaning: "there's only", category: 'Common Phrases' },
            { char: 'Âà∞Â∫ï', pinyin: 'd√†od«ê', meaning: 'after all (emphatic use)', category: 'Common Phrases' },
            { char: 'ËøòÊòØ', pinyin: 'h√°ish√¨', meaning: 'or; still', category: 'Common Phrases' },
            { char: 'ÁúãËµ∑Êù•', pinyin: 'k√†n.qi.l√°i', meaning: 'look like, seem', category: 'Common Phrases' },
            { char: 'Áúã‰∏çÂá∫Êù•', pinyin: 'k√†n.b√π.ch≈´.l√°i', meaning: "can't figure out by looking", category: 'Common Phrases' },

            // === MEASURE WORDS ===
            { char: '‰∏™', pinyin: 'g√®', meaning: 'general measure word', category: 'Measure Words' },
            { char: 'Âº†', pinyin: 'zhƒÅng', meaning: 'measure word for flat things', category: 'Measure Words' },
            { char: 'Èó®', pinyin: 'm√©n', meaning: 'measure word for courses', category: 'Measure Words' },
            { char: '‰∫õ', pinyin: 'xiƒì', meaning: '"plural" measure word', category: 'Measure Words' },
            { char: 'Ê¨°', pinyin: 'c√¨', meaning: 'measure word for time/instance', category: 'Measure Words' },
            { char: 'ÁÇπ', pinyin: 'di«én', meaning: 'measure word for hours on clock', category: 'Measure Words' },

            // === NEGATION ===
            { char: '‰∏ç', pinyin: 'b√π', meaning: 'no; not', category: 'Negation' },
            { char: 'Ê≤°', pinyin: 'm√©i', meaning: 'have not; did not', category: 'Negation' },
            { char: 'Âà´', pinyin: 'bi√©', meaning: "don't (imperative)", category: 'Negation' },

            // === DIRECTION/LOCATION ===
            { char: '‰∏ä', pinyin: 'sh√†ng', meaning: 'in; on; up', category: 'Direction' },
            { char: 'Èáå', pinyin: 'l«ê', meaning: 'inside', category: 'Direction' },
            { char: 'Ëæπ', pinyin: 'biƒÅn', meaning: 'side', category: 'Direction' },
            { char: 'ÈôÑËøë', pinyin: 'f√πj√¨n', meaning: 'nearby; vicinity', category: 'Direction' }
        ];

        // Initialize the quiz with the modular engine
        initQuiz(characters, {
            enablePreviewQueue: true,
            previewQueueSize: 1,
            previewElementId: 'upcomingCharacters',
            previewApplicableModes: ['char-to-meaning-type', 'char-to-meaning', 'audio-to-meaning']
        });
    </script>
</body>
</html>
