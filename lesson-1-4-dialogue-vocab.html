<!DOCTYPE html>
<html lang="zh-CN" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google" content="notranslate">
    <title>Lessons 1-4 Dialogue Vocabulary Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5/dist/hanzi-writer.min.js"></script>
    <link rel="stylesheet" href="css/common.css">
    <style>
        html, body {
            height: 100%;
            overflow: hidden;
        }

        /* Confidence pane on the right for this experimental page */
        body.experimental-layout #confidencePanel {
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            width: 240px;
            overflow: hidden;
            background: linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);
            border-left: 1px solid #e5e7eb;
            box-shadow: -6px 0 20px rgba(0,0,0,0.05);
            padding: 0.65rem 0.85rem 0.85rem;
            margin-top: 0 !important;
            z-index: 40;
            font-size: 0.8rem;
            display: flex;
            flex-direction: column;
            gap: 0.35rem;
        }

        body.experimental-layout #confidencePanel .space-y-1 { margin-top: 0.35rem; }
        body.experimental-layout #confidencePanel .border-t { border-top: none !important; }
        body.experimental-layout #confidencePanel .pt-4 { padding-top: 0 !important; }
        body.experimental-layout #confidencePanel #confidenceList {
            flex: 1;
            overflow-y: auto;
            min-height: 0;
            padding-bottom: 0.5rem;
            max-height: none !important;
        }

        /* Add breathing room so content doesn't sit under the right pane */
        body.experimental-layout .app-container {
            padding-right: 16rem;
            min-height: 100vh;
        }

        /* Hide confidence panel on smaller screens */
        @media (max-width: 1024px) {
            body.experimental-layout #confidencePanel {
                display: none;
            }
            body.experimental-layout .app-container {
                padding-right: 0;
            }
        }

        /* Main layout */
        .app-container {
            display: flex;
            height: 100vh;
            width: 100vw;
        }

        /* Sidebar */
        .sidebar {
            width: 16rem;
            flex-shrink: 0;
            background: #ffffff;
            box-shadow: 0 10px 25px rgba(0,0,0,0.06);
            padding: 1rem;
            overflow-y: auto;
        }

        .sidebar h2 {
            font-size: 1.125rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 1rem;
            margin-top: 3rem;
        }

        .sidebar .mode-desc {
            font-size: 0.875rem;
            color: #9ca3af;
            margin-bottom: 0.75rem;
            line-height: 1.4;
        }

        .sidebar .mode-btn {
            display: block;
            width: 100%;
            padding: 0.5rem 0.75rem;
            margin-bottom: 0.25rem;
            border-radius: 0.75rem;
            border: 2px solid #d1d5db;
            background: #ffffff;
            text-align: left;
            font-size: 0.9rem;
            color: #374151;
            cursor: pointer;
            transition: background 0.15s, border-color 0.15s, color 0.15s;
        }

        .sidebar .mode-btn:hover {
            background: #f3f4f6;
        }

        .sidebar .mode-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        /* Main content area */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-width: 0;
            padding: 1rem 2rem;
            overflow: hidden;
        }

        .quiz-header {
            flex-shrink: 0;
            text-align: center;
            padding-bottom: 0.5rem;
        }

        .quiz-header h1 {
            font-size: 1.125rem;
            font-weight: 600;
            color: #374151;
            margin: 0;
        }

        .quiz-display {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 0;
            padding: 1rem 0;
        }

        #questionDisplay {
            width: 100%;
        }

        .three-column-meaning-layout {
            margin: 0 auto;
            padding: 0.5rem;
            gap: 2rem;
        }

        .three-column-meaning-layout .column-char-large {
            font-size: clamp(56px, 12vw, 120px);
        }

        .three-column-meaning-layout .column-char {
            font-size: clamp(28px, 5vw, 40px);
        }

        .three-column-meaning-layout .column-card {
            min-height: auto;
            padding: 0.5rem;
        }

        .input-section {
            flex-shrink: 0;
            max-width: 32rem;
            width: 100%;
            margin: 0 auto;
            padding-top: 1rem;
        }

        .input-section input[type="text"] {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.15s;
        }

        .input-section input[type="text"]:focus {
            border-color: #3b82f6;
        }

        .choice-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
        }

        .choice-grid button {
            padding: 0.875rem 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            background: white;
            font-size: 0.9375rem;
            cursor: pointer;
            transition: all 0.15s;
        }

        .choice-grid button:hover {
            border-color: #3b82f6;
            background: #eff6ff;
        }

        .stats-bar {
            flex-shrink: 0;
            display: flex;
            justify-content: center;
            gap: 2rem;
            padding: 0.75rem 0;
            font-size: 0.875rem;
            color: #6b7280;
            border-top: 1px solid #f3f4f6;
            margin-top: auto;
        }

        .stats-bar span {
            font-weight: 500;
        }

        #feedback {
            min-height: 2rem;
            text-align: center;
            font-size: 1.25rem;
            font-weight: 600;
            padding: 0.5rem 0;
        }

        #typeMode, #choiceMode, #fuzzyMode, #strokeOrderMode,
        #handwritingMode, #drawCharMode, #studyMode {
            display: none;
        }

        #typeMode.active, #choiceMode.active, #fuzzyMode.active,
        #strokeOrderMode.active, #handwritingMode.active,
        #drawCharMode.active, #studyMode.active {
            display: block;
        }

        body.study-mode-active .input-section {
            max-width: none;
            flex-direction: column;
        }

        #studyMode.active {
            width: 100%;
        }

        body.study-mode-active #feedback {
            display: none;
        }

        .home-btn {
            position: fixed;
            top: 1rem;
            left: 1rem;
            padding: 0.375rem 0.75rem;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            color: #374151;
            text-decoration: none;
            z-index: 50;
            transition: background 0.15s;
        }

        .home-btn:hover {
            background: #f3f4f6;
        }

        #audioSection button {
            padding: 0.75rem 1.5rem;
            background: #06b6d4;
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.15s;
        }

        #audioSection button:hover {
            background: #0891b2;
        }
    </style>
    <script src="js/utils.js"></script>
    <script src="js/command-palette.js"></script>
    <script src="js/etymology-loader.js"></script>
    <script src="js/pinyin-utils.js"></script>
    <script src="js/engine/ai-service.js"></script>
    <script src="js/engine/chat.js"></script>
    <script src="js/quiz-engine.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase-sync.js"></script>
</head>
<body class="experimental-layout">
    <a href="home.html" class="home-btn">â† Home</a>

    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <h2>Quiz Modes</h2>
            <p class="mode-desc">Choose a mode, then answer in the panel to the right.</p>
            <nav>
                <button class="mode-btn" data-mode="char-to-meaning-type">Char â†’ Meaning</button>
                <button class="mode-btn" data-mode="char-to-pinyin">Char â†’ Pinyin</button>
                <button class="mode-btn" data-mode="char-to-pinyin-type">Char â†’ Pinyin (MC)</button>
                <button class="mode-btn" data-mode="char-to-pinyin-tones-mc">Char â†’ Pinyin â†’ Tones (MC)</button>
                <button class="mode-btn" data-mode="char-to-tones">Char â†’ Tones</button>
                <button class="mode-btn" data-mode="audio-to-pinyin">Audio â†’ Pinyin</button>
                <button class="mode-btn" data-mode="pinyin-to-char">Pinyin â†’ Char</button>
                <button class="mode-btn" data-mode="audio-to-meaning">Audio â†’ Meaning</button>
                <button class="mode-btn" data-mode="meaning-to-char">Meaning â†’ Char</button>
                <button class="mode-btn" data-mode="stroke-order">Stroke Order</button>
                <button class="mode-btn" data-mode="handwriting">Handwriting</button>
                <button class="mode-btn" data-mode="draw-char">Draw Character</button>
                <button class="mode-btn" data-mode="missing-component">Missing Component</button>
                <button class="mode-btn" data-mode="char-building">Build Character</button>
                <button class="mode-btn" data-mode="study">Study Mode</button>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="quiz-header">
                <h1>Lessons 1-4: Dialogue Vocabulary (137 words)</h1>
            </header>

            <!-- Quiz Display -->
            <section class="quiz-display">
                <div id="questionDisplay"></div>

                <div id="upcomingCharacters" class="hidden" style="margin-top: 1rem;">
                    <div class="preview-list" style="display: flex; justify-content: center; gap: 1rem; font-size: 2rem; color: #d1d5db;"></div>
                    <div style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.1em; color: #9ca3af; margin-top: 0.5rem;">Upcoming</div>
                </div>

                <div id="hint" style="font-size: 1.5rem; font-weight: 600; margin: 1rem 0;"></div>

                <div id="audioSection" class="hidden" style="margin: 1rem 0;">
                    <button id="playAudioBtn">ğŸ”Š Play Sound</button>
                </div>
            </section>

            <!-- Input Section -->
            <section class="input-section">
                <div id="typeMode">
                    <input type="text" id="answerInput" placeholder="Type your answer...">
                    <button id="checkBtn" style="display: none;">Check Answer</button>
                </div>

                <div id="choiceMode">
                    <div id="options" class="choice-grid"></div>
                </div>

                <div id="fuzzyMode">
                    <input type="text" id="fuzzyInput" placeholder="Type your answer...">
                    <div id="fuzzyOptions" class="choice-grid" style="margin-top: 0.75rem;"></div>
                </div>

                <div id="strokeOrderMode">
                    <div id="strokeOrderWriter" style="display: flex; justify-content: center;"></div>
                </div>

                <div id="handwritingMode">
                    <p style="text-align: center; color: #6b7280; margin-bottom: 1rem;">Practice writing on paper, then reveal the answer</p>
                    <div id="handwritingWriter" style="display: flex; justify-content: center; gap: 10px;"></div>
                    <div style="display: flex; justify-content: center; gap: 0.75rem; margin-top: 1rem;">
                        <button id="hwShowBtn" style="padding: 0.75rem 2rem; background: #3b82f6; color: white; border: none; border-radius: 0.5rem; cursor: pointer;">Show Answer</button>
                        <button id="hwNextBtn" style="padding: 0.75rem 2rem; background: #22c55e; color: white; border: none; border-radius: 0.5rem; cursor: pointer;">Next</button>
                    </div>
                    <p id="hwSpaceHint" class="text-center text-sm text-gray-500 mt-2">Space: show â†’ tap âœ“ correct Â· hold âœ— wrong</p>
                </div>

                <div id="drawCharMode">
                    <div style="text-align: center; margin-bottom: 1rem;">
                        <div id="ocrResult" style="font-size: 3.5rem; min-height: 5rem; color: #3b82f6; font-weight: 700;"></div>
                        <div style="font-size: 0.875rem; color: #9ca3af;">Real-time recognition</div>
                    </div>
                    <canvas id="drawCanvas" style="display: block; margin: 0 auto; border: 2px solid #d1d5db; border-radius: 0.5rem; cursor: crosshair;" width="300" height="300"></canvas>
                    <div style="display: flex; justify-content: center; gap: 0.75rem; margin-top: 1rem;">
                        <button id="clearCanvasBtn" style="padding: 0.5rem 1.5rem; background: #ef4444; color: white; border: none; border-radius: 0.5rem; cursor: pointer;">Clear</button>
                        <button id="submitDrawBtn" style="padding: 0.5rem 1.5rem; background: #22c55e; color: white; border: none; border-radius: 0.5rem; cursor: pointer;">Submit</button>
                        <button id="fullscreenDrawBtn" style="padding: 0.5rem 1.5rem; background: #3b82f6; color: white; border: none; border-radius: 0.5rem; cursor: pointer;">Fullscreen</button>
                    </div>
                </div>

                <div id="studyMode">
                    <p style="text-align: center; color: #6b7280; margin-bottom: 1rem;">Study vocabulary from Lessons 1-4 dialogues</p>
                    <div id="studyList" style="max-height: 400px; overflow-y: auto;"></div>
                </div>

                <div id="missingComponentMode" style="display: none;">
                    <input type="text" id="componentInput" placeholder="Type component pinyin..." style="width: 100%; padding: 0.75rem 1rem; font-size: 1.25rem; border: 2px solid #d1d5db; border-radius: 0.5rem; text-align: center; margin-bottom: 1rem;">
                    <div id="componentOptions" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem;"></div>
                </div>

                <!-- Character Building Mode -->
                <div id="charBuildingMode" style="display: none;">
                    <input type="text" id="charBuildingInput" placeholder="Type component pinyin..." style="width: 100%; padding: 0.75rem 1rem; font-size: 1.25rem; border: 2px solid #d1d5db; border-radius: 0.5rem; text-align: center; margin-bottom: 1rem;">
                    <div id="charBuildingOptions" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem;"></div>
                </div>

                <div id="feedback"></div>
            </section>

            <!-- Stats Bar -->
            <footer class="stats-bar" id="stats">
                <div>Score: <span id="score">0</span>/<span id="total">0</span></div>
                <div>Accuracy: <span id="accuracy">0%</span></div>
            </footer>
        </main>
    </div>

    <script>
        const characters = [
            // === Lesson 1 Dialogue Vocab (ä¸¤å¼ åœ°å›¾) ===
            { char: 'åœ°å›¾', pinyin: 'dÃ¬tÃº', meaning: 'map' },
            { char: 'ä¸­å›½', pinyin: 'ZhÅngguÃ³', meaning: 'China' },
            { char: 'é‚£ä¹ˆ', pinyin: 'nÃ me', meaning: 'then; in that case' },
            { char: 'ä¸ºä»€ä¹ˆ', pinyin: 'wÃ¨ishÃ©nme', meaning: 'why' },
            { char: 'ä¸¤', pinyin: 'liÇng', meaning: 'two (before measure words)' },
            { char: 'å¼ ', pinyin: 'zhÄng', meaning: 'measure word for flat objects' },
            { char: 'ä¸ä¸€æ ·', pinyin: 'bÃ¹ yÄ«yÃ ng', meaning: 'different; not the same' },
            { char: 'å› ä¸º', pinyin: 'yÄ«nwÃ¨i', meaning: 'because' },
            { char: 'ä¸­åæ°‘å›½', pinyin: 'ZhÅnghuÃ¡ MÃ­nguÃ³', meaning: 'Republic of China (ROC)' },
            { char: 'ä¸­åäººæ°‘å…±å’Œå›½', pinyin: 'ZhÅnghuÃ¡ RÃ©nmÃ­n GÃ²nghÃ©guÃ³', meaning: 'People\'s Republic of China (PRC)' },
            { char: 'æ¯”', pinyin: 'bÇ', meaning: 'compared to; than' },
            { char: 'å¤§', pinyin: 'dÃ ', meaning: 'big; large' },
            { char: 'ä¸€ç‚¹å„¿', pinyin: 'yÃ¬diÇnr', meaning: 'a little bit' },
            { char: 'ä»¥å‰', pinyin: 'yÇqiÃ¡n', meaning: 'before; previously' },
            { char: 'é‚£æ—¶', pinyin: 'nÃ shÃ­', meaning: 'at that time' },
            { char: 'è¿˜', pinyin: 'hÃ¡i', meaning: 'still; also' },
            { char: 'åŒ…æ‹¬', pinyin: 'bÄokuÃ²', meaning: 'include' },
            { char: 'ç°åœ¨', pinyin: 'xiÃ nzÃ i', meaning: 'now; present' },
            { char: 'è’™å¤å›½', pinyin: 'MÄ›nggÇ”guÃ³', meaning: 'Mongolia' },
            { char: 'æ‡‚', pinyin: 'dÇ’ng', meaning: 'understand' },
            { char: 'å†å²', pinyin: 'lÃ¬shÇ', meaning: 'history' },
            { char: 'å¯æ˜¯', pinyin: 'kÄ›shÃ¬', meaning: 'but; however' },
            { char: 'å®Œå…¨', pinyin: 'wÃ¡nquÃ¡n', meaning: 'completely; entirely' },
            { char: 'æ¬', pinyin: 'bÄn', meaning: 'move (to a place)' },
            { char: 'å°æ¹¾', pinyin: 'TÃ¡iwÄn', meaning: 'Taiwan' },
            { char: 'å°±æ˜¯', pinyin: 'jiÃ¹shÃ¬', meaning: 'is exactly; precisely' },
            { char: 'æ”¿åºœ', pinyin: 'zhÃ¨ngfÇ”', meaning: 'government' },
            { char: 'åªæœ‰', pinyin: 'zhÇyÇ’u', meaning: 'only' },
            { char: 'è€Œ', pinyin: 'Ã©r', meaning: 'and; but (literary)' },
            { char: 'ä¸€éƒ¨åˆ†', pinyin: 'yÃ­ bÃ¹fÃ¨n', meaning: 'a part; portion' },
            { char: 'å›½å®¶', pinyin: 'guÃ³jiÄ', meaning: 'country; nation' },
            { char: 'å¾ˆéš¾è¯´', pinyin: 'hÄ›n nÃ¡n shuÅ', meaning: 'hard to say' },

            // === Lesson 2 Dialogue Vocab (æˆ‘çš„å®¶åœ¨å“ªå„¿?) ===
            { char: 'çˆ¶äº²', pinyin: 'fÃ¹qin', meaning: 'father' },
            { char: 'ä¹¦æˆ¿', pinyin: 'shÅ«fÃ¡ng', meaning: 'study (room)' },
            { char: 'æŒ‚', pinyin: 'guÃ ', meaning: 'hang' },
            { char: 'å¸¸', pinyin: 'chÃ¡ng', meaning: 'often; frequently' },
            { char: 'æŒ‡', pinyin: 'zhÇ', meaning: 'point at' },
            { char: 'è¥¿å—', pinyin: 'xÄ«nÃ¡n', meaning: 'southwest' },
            { char: 'é»‘ç‚¹', pinyin: 'hÄ“idiÇn', meaning: 'black dot' },
            { char: 'è€å®¶', pinyin: 'lÇojiÄ', meaning: 'hometown; ancestral home' },
            { char: 'è§‰å¾—', pinyin: 'juÃ©de', meaning: 'feel; think' },
            { char: 'å¥‡æ€ª', pinyin: 'qÃ­guÃ i', meaning: 'strange; odd' },
            { char: 'çº½çº¦', pinyin: 'NiÇ”yuÄ“', meaning: 'New York' },
            { char: 'æ€ä¹ˆ', pinyin: 'zÄ›nme', meaning: 'how; why' },
            { char: 'åæ¥', pinyin: 'hÃ²ulÃ¡i', meaning: 'later; afterwards' },
            { char: 'çŸ¥é“', pinyin: 'zhÄ«dÃ o', meaning: 'know' },
            { char: 'æˆéƒ½', pinyin: 'ChÃ©ngdÅ«', meaning: 'Chengdu' },
            { char: 'çˆ¶æ¯', pinyin: 'fÃ¹mÇ”', meaning: 'parents' },
            { char: 'è™½ç„¶', pinyin: 'suÄ«rÃ¡n', meaning: 'although' },
            { char: 'ç¾å›½', pinyin: 'MÄ›iguÃ³', meaning: 'America; USA' },
            { char: 'å¿«', pinyin: 'kuÃ i', meaning: 'almost; soon; fast' },
            { char: 'ä¸‰å', pinyin: 'sÄnshÃ­', meaning: 'thirty' },
            { char: 'å¹´', pinyin: 'niÃ¡n', meaning: 'year' },
            { char: 'æ€»', pinyin: 'zÇ’ng', meaning: 'always; invariably' },
            { char: 'ç”Ÿ', pinyin: 'shÄ“ng', meaning: 'be born; give birth' },
            { char: 'é•¿', pinyin: 'zhÇng', meaning: 'grow; grow up' },
            { char: 'ä»å°', pinyin: 'cÃ³ngxiÇo', meaning: 'since childhood' },
            { char: 'è·Ÿ', pinyin: 'gÄ“n', meaning: 'with; and' },
            { char: 'ä¸­å›½äºº', pinyin: 'ZhÅngguÃ³rÃ©n', meaning: 'Chinese person' },
            { char: 'ä¸­æ–‡', pinyin: 'ZhÅngwÃ©n', meaning: 'Chinese language' },
            { char: 'åƒ', pinyin: 'chÄ«', meaning: 'eat' },
            { char: 'ä¸­å›½èœ', pinyin: 'ZhÅngguÃ³ cÃ i', meaning: 'Chinese food' },
            { char: 'æœ‰æ—¶', pinyin: 'yÇ’ushÃ­', meaning: 'sometimes' },
            { char: 'ç”µè§†', pinyin: 'diÃ nshÃ¬', meaning: 'television' },
            { char: 'èŠ‚ç›®', pinyin: 'jiÃ©mÃ¹', meaning: 'program; show' },
            { char: 'æ˜ŸæœŸå…­', pinyin: 'xÄ«ngqÄ«liÃ¹', meaning: 'Saturday' },
            { char: 'é™„è¿‘', pinyin: 'fÃ¹jÃ¬n', meaning: 'nearby; vicinity' },
            { char: 'åŒå­¦', pinyin: 'tÃ³ngxuÃ©', meaning: 'classmate' },
            { char: 'åˆ°åº•', pinyin: 'dÃ odÇ', meaning: 'actually; after all' },
            { char: 'ç¾å›½äºº', pinyin: 'MÄ›iguÃ³rÃ©n', meaning: 'American person' },
            { char: 'æ„æ€', pinyin: 'yÃ¬si', meaning: 'meaning' },

            // === Lesson 3 Dialogue Vocab (æˆ‘ä»¬éƒ½æ˜¯ç¾å›½äºº) ===
            { char: 'å¾·å·', pinyin: 'DÃ©zhÅu', meaning: 'Texas' },
            { char: 'çœ‹èµ·æ¥', pinyin: 'kÃ n qÇlÃ¡i', meaning: 'look like; appear' },
            { char: 'åƒ', pinyin: 'xiÃ ng', meaning: 'resemble; be like' },
            { char: 'ä¸€æ ·', pinyin: 'yÃ­yÃ ng', meaning: 'same; alike' },
            { char: 'çœ‹ä¸å‡ºæ¥', pinyin: 'kÃ n bu chÅ«lÃ¡i', meaning: 'can\'t tell; can\'t see' },
            { char: 'ä»€ä¹ˆæ ·', pinyin: 'shÃ©nmeyÃ ng', meaning: 'what kind' },
            { char: 'æ‰', pinyin: 'cÃ¡i', meaning: 'only then; only' },
            { char: 'é»„', pinyin: 'huÃ¡ng', meaning: 'yellow' },
            { char: 'å¤´å‘', pinyin: 'tÃ³ufa', meaning: 'hair (on head)' },
            { char: 'è“', pinyin: 'lÃ¡n', meaning: 'blue' },
            { char: 'çœ¼ç›', pinyin: 'yÇnjing', meaning: 'eye(s)' },
            { char: 'ä¸ä¸€å®š', pinyin: 'bÃ¹ yÄ«dÃ¬ng', meaning: 'not necessarily' },
            { char: 'é»‘', pinyin: 'hÄ“i', meaning: 'black' },
            { char: 'ä½†æ˜¯', pinyin: 'dÃ nshÃ¬', meaning: 'but; however' },
            { char: 'å´', pinyin: 'quÃ¨', meaning: 'but; however; yet' },
            { char: 'æ—¥æœ¬äºº', pinyin: 'RÃ¬bÄ›nrÃ©n', meaning: 'Japanese person' },
            { char: 'ç™½äºº', pinyin: 'bÃ¡irÃ©n', meaning: 'white person; Caucasian' },
            { char: 'é»‘äºº', pinyin: 'hÄ“irÃ©n', meaning: 'Black person' },
            { char: 'é»„ç§äºº', pinyin: 'huÃ¡ngzhÇ’ngrÃ©n', meaning: 'Asian (lit. yellow race person)' },
            { char: 'æ¬§æ´²äºº', pinyin: 'ÅŒuzhÅurÃ©n', meaning: 'European person' },
            { char: 'éæ´²äºº', pinyin: 'FÄ“izhÅurÃ©n', meaning: 'African person' },
            { char: 'äºšæ´²äºº', pinyin: 'YÃ zhÅurÃ©n', meaning: 'Asian person' },
            { char: 'åªè¦', pinyin: 'zhÇyÃ o', meaning: 'as long as; provided that' },
            { char: 'å¾—', pinyin: 'dÄ›i', meaning: 'must; have to' },

            // === Lesson 4 Dialogue Vocab (ç¾å›½äººå­¦ä¸­æ–‡) ===
            { char: 'å¦ˆ', pinyin: 'mÄ', meaning: 'mom; mother' },
            { char: 'ä»Šå¤©', pinyin: 'jÄ«ntiÄn', meaning: 'today' },
            { char: 'æ³¨å†Œ', pinyin: 'zhÃ¹cÃ¨', meaning: 'register (for class)' },
            { char: 'é€‰', pinyin: 'xuÇn', meaning: 'choose; select' },
            { char: 'é—¨', pinyin: 'mÃ©n', meaning: 'measure word for courses' },
            { char: 'è¯¾', pinyin: 'kÃ¨', meaning: 'class; course' },
            { char: 'è®¨åŒ', pinyin: 'tÇoyÃ n', meaning: 'dislike; find annoying' },
            { char: 'å€’', pinyin: 'dÃ o', meaning: 'on the contrary; instead' },
            { char: 'å…¶å®', pinyin: 'qÃ­shÃ­', meaning: 'actually; in fact' },
            { char: 'å°æ—¶å€™', pinyin: 'xiÇoshÃ­hou', meaning: 'childhood; when young' },
            { char: 'å¹¶ä¸', pinyin: 'bÃ¬ngbÃ¹', meaning: 'actually not; not at all' },
            { char: 'åªæ˜¯', pinyin: 'zhÇshÃ¬', meaning: 'only; just; merely' },
            { char: 'ä¹ æƒ¯', pinyin: 'xÃ­guÃ n', meaning: 'be accustomed to; habit' },
            { char: 'é€¼', pinyin: 'bÄ«', meaning: 'force; compel; push' },
            { char: 'å¤ª', pinyin: 'tÃ i', meaning: 'too; excessively' },
            { char: 'ç´§', pinyin: 'jÇn', meaning: 'tight; strict' },
            { char: 'å¥½æäº†', pinyin: 'hÇojÃ­le', meaning: 'wonderful; great' },
            { char: 'çˆ¸çˆ¸', pinyin: 'bÃ ba', meaning: 'father; dad' },
            { char: 'å¬åˆ°', pinyin: 'tÄ«ngdÃ o', meaning: 'hear' },
            { char: 'æ¶ˆæ¯', pinyin: 'xiÄoxi', meaning: 'news; information' },
            { char: 'ä¸€å®š', pinyin: 'yÃ­dÃ¬ng', meaning: 'certainly; definitely' },
            { char: 'é«˜å…´', pinyin: 'gÄoxÃ¬ng', meaning: 'happy; glad' },
            { char: 'å‘Šè¯‰', pinyin: 'gÃ osu', meaning: 'tell; inform' },
            { char: 'åˆæ¥äº†', pinyin: 'yÃ²u lÃ¡ile', meaning: 'there you go again' },
            { char: 'ä¸–ç•Œ', pinyin: 'shÃ¬jiÃ¨', meaning: 'world' },
            { char: 'å„åœ°', pinyin: 'gÃ¨dÃ¬', meaning: 'everywhere; all places' },
            { char: 'ä¸ä½†', pinyin: 'bÃ¹dÃ n', meaning: 'not only' },
            { char: 'è‹±å›½', pinyin: 'YÄ«ngguÃ³', meaning: 'England; UK' },
            { char: 'æ³•å›½', pinyin: 'FÇguÃ³', meaning: 'France' },
            { char: 'æ—¥æœ¬', pinyin: 'RÃ¬bÄ›n', meaning: 'Japan' },
            { char: 'äººå£', pinyin: 'rÃ©nkÇ’u', meaning: 'population' },
            { char: 'å¤š', pinyin: 'duÅ', meaning: 'many; much' },
            { char: 'ç»æµ', pinyin: 'jÄ«ngjÃ¬', meaning: 'economy' },
            { char: 'è´¸æ˜“', pinyin: 'mÃ oyÃ¬', meaning: 'trade; commerce' },
            { char: 'å‘è¾¾', pinyin: 'fÄdÃ¡', meaning: 'developed; advanced' },
            { char: 'åšç”Ÿæ„', pinyin: 'zuÃ² shÄ“ngyi', meaning: 'do business' },
            { char: 'è¶Šæ¥è¶Š', pinyin: 'yuÃ¨lÃ¡iyuÃ¨', meaning: 'more and more' },
            { char: 'ä¸€å¤©æ¯”ä¸€å¤©', pinyin: 'yÃ¬tiÄn bÇ yÃ¬tiÄn', meaning: 'day by day' },
            { char: 'ä¸ºäº†', pinyin: 'wÃ¨ile', meaning: 'in order to' },
            { char: 'ä¹°å–', pinyin: 'mÇimai', meaning: 'business; buying and selling' },
            { char: 'ä¸è§å¾—', pinyin: 'bÃºjiÃ ndÃ©', meaning: 'not necessarily' },
            { char: 'æ–‡å­¦', pinyin: 'wÃ©nxuÃ©', meaning: 'literature' },
            { char: 'é•¿å¤§', pinyin: 'zhÇngdÃ ', meaning: 'grow up' },
            { char: 'è‡ªå·±', pinyin: 'zÃ¬jÇ', meaning: 'oneself; self' },
            { char: 'åˆš', pinyin: 'gÄng', meaning: 'just now; just' },
            { char: 'æ›´', pinyin: 'gÃ¨ng', meaning: 'even more' },
            { char: 'æœ‰æ„æ€', pinyin: 'yÇ’uyÃ¬si', meaning: 'interesting; meaningful' }
        ];

        initQuiz(characters, {
            enablePreviewQueue: true,
            previewQueueSize: 1,
            previewElementId: 'upcomingCharacters',
            previewApplicableModes: ['char-to-meaning-type', 'char-to-meaning', 'audio-to-meaning']
        });
    </script>
</body>
</html>
